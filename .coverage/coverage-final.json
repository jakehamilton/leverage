{"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\index.ts": {"path":"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\index.ts","statementMap":{"0":{"start":{"line":3,"column":4},"end":{"line":3,"column":71}},"1":{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},"2":{"start":{"line":3,"column":53},"end":{"line":3,"column":71}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}},"5":{"start":{"line":7,"column":0},"end":{"line":7,"column":30}},"6":{"start":{"line":8,"column":0},"end":{"line":8,"column":31}},"7":{"start":{"line":9,"column":0},"end":{"line":9,"column":33}},"8":{"start":{"line":10,"column":0},"end":{"line":10,"column":34}}},"fnMap":{"0":{"name":"__export","decl":{"start":{"line":2,"column":9},"end":{"line":2,"column":17}},"loc":{"start":{"line":2,"column":21},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},"type":"if","locations":[{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},{"start":{"line":3,"column":21},"end":{"line":3,"column":71}}],"line":3}},"s":{"0":10,"1":10,"2":10,"3":2,"4":2,"5":2,"6":2,"7":2,"8":2},"f":{"0":10},"b":{"0":[10,0]},"inputSourceMap":{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";;;;;AA4EA,+BAA0B;AAC1B,8BAAyB;AACzB,+BAA0B;AAC1B,iCAA4B;AAC5B,kCAA6B","sourcesContent":["import {\n    PluginUnit,\n    PluginConfig,\n    PluginConfigWithDependencies,\n    PluginInstanceWithDependencies,\n} from './plugin';\nimport {\n    ServiceUnit,\n    ServiceConfig,\n    ServiceConfigWithDependencies,\n    ServiceInstanceWithDependencies,\n} from './service';\nimport {\n    ComponentUnit,\n    ComponentConfig,\n    ComponentConfigWithDependencies,\n} from './component';\nimport {\n    MiddlewareUnit,\n    MiddlewareConfig,\n    MiddlewareConfigWithDependencies,\n} from './middleware';\n\n/**\n * A valid (and useful) Leverage unit\n */\nexport type LeverageUnit =\n    | PluginUnit\n    | ServiceUnit\n    | ComponentUnit\n    | MiddlewareUnit;\n\n/**\n * A valid Leverage unit config\n */\nexport type LeverageConfig =\n    | PluginConfig\n    | ServiceConfig\n    | ComponentConfig\n    | MiddlewareConfig;\n\n/**\n * A valid Leverage unit config with its dependency properties\n */\nexport type LeverageConfigWithDependencies =\n    | PluginConfigWithDependencies\n    | ServiceConfigWithDependencies\n    | ComponentConfigWithDependencies\n    | MiddlewareConfigWithDependencies;\n\n/**\n * Non-specific leverage unit\n */\nexport interface EmptyUnit {\n    [x: string]: any;\n}\n\nexport interface LeverageInstance {\n    is: string;\n    config: LeverageConfig;\n\n    [key: string]: any;\n}\n\nexport interface LeverageInstanceWithDependencies extends LeverageInstance {\n    config: LeverageConfigWithDependencies;\n\n    plugins: {\n        [key: string]: PluginInstanceWithDependencies;\n    };\n\n    services: {\n        [key: string]: ServiceInstanceWithDependencies;\n    };\n}\n\nexport * from './manager';\nexport * from './plugin';\nexport * from './service';\nexport * from './component';\nexport * from './middleware';\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"d6d300bef2fa04bdc37aa30f4474eb270e2efd4f"}
,"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\component\\component.ts": {"path":"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\component\\component.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":8,"column":4},"end":{"line":15,"column":5}},"2":{"start":{"line":10,"column":8},"end":{"line":10,"column":30}},"3":{"start":{"line":14,"column":8},"end":{"line":14,"column":20}},"4":{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},"5":{"start":{"line":20,"column":8},"end":{"line":20,"column":32}},"6":{"start":{"line":21,"column":8},"end":{"line":21,"column":42}},"7":{"start":{"line":25,"column":8},"end":{"line":25,"column":20}},"8":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"9":{"start":{"line":31,"column":8},"end":{"line":31,"column":109}},"10":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"11":{"start":{"line":34,"column":8},"end":{"line":34,"column":82}},"12":{"start":{"line":36,"column":4},"end":{"line":40,"column":5}},"13":{"start":{"line":37,"column":8},"end":{"line":39,"column":140}},"14":{"start":{"line":44,"column":15},"end":{"line":44,"column":40}},"15":{"start":{"line":52,"column":8},"end":{"line":52,"column":32}},"16":{"start":{"line":53,"column":8},"end":{"line":53,"column":42}},"17":{"start":{"line":57,"column":8},"end":{"line":57,"column":35}},"18":{"start":{"line":58,"column":8},"end":{"line":58,"column":45}},"19":{"start":{"line":60,"column":4},"end":{"line":60,"column":21}},"20":{"start":{"line":62,"column":0},"end":{"line":62,"column":30}}},"fnMap":{"0":{"name":"Component","decl":{"start":{"line":3,"column":9},"end":{"line":3,"column":18}},"loc":{"start":{"line":3,"column":27},"end":{"line":61,"column":1}},"line":3},"1":{"name":"decorator","decl":{"start":{"line":48,"column":13},"end":{"line":48,"column":22}},"loc":{"start":{"line":48,"column":34},"end":{"line":59,"column":5}},"line":48}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":4},"end":{"line":15,"column":5}},"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":15,"column":5}},{"start":{"line":8,"column":4},"end":{"line":15,"column":5}}],"line":8},"1":{"loc":{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},{"start":{"line":19,"column":4},"end":{"line":26,"column":5}}],"line":19},"2":{"loc":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},{"start":{"line":30,"column":4},"end":{"line":32,"column":5}}],"line":30},"3":{"loc":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},{"start":{"line":33,"column":4},"end":{"line":35,"column":5}}],"line":33},"4":{"loc":{"start":{"line":36,"column":4},"end":{"line":40,"column":5}},"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":40,"column":5}},{"start":{"line":36,"column":4},"end":{"line":40,"column":5}}],"line":36},"5":{"loc":{"start":{"line":36,"column":8},"end":{"line":36,"column":70}},"type":"binary-expr","locations":[{"start":{"line":36,"column":8},"end":{"line":36,"column":39}},{"start":{"line":36,"column":43},"end":{"line":36,"column":70}}],"line":36}},"s":{"0":4,"1":11,"2":1,"3":1,"4":10,"5":1,"6":1,"7":1,"8":9,"9":3,"10":6,"11":1,"12":5,"13":2,"14":3,"15":2,"16":2,"17":2,"18":2,"19":3,"20":4},"f":{"0":11,"1":2},"b":{"0":[1,10],"1":[1,9],"2":[3,6],"3":[1,5],"4":[2,3],"5":[5,2]},"inputSourceMap":{"version":3,"file":"component.js","sourceRoot":"","sources":["component.ts"],"names":[],"mappings":";;AA4CA,mBAA2B,MAAW;IAClC;;OAEG;IACH,aAAa;IACb,IAAI,IAAI,YAAY,SAAS,EAAE;QAC3B,aAAa;QACZ,IAAsB,CAAC,EAAE,GAAG,WAAW,CAAC;QAEzC;;WAEG;QACH,OAAO,IAAW,CAAC;KACtB;IAED;;OAEG;IACH,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE;QAC7B,MAAwB,CAAC,EAAE,GAAG,WAAW,CAAC;QAC1C,MAAc,CAAC,SAAS,CAAC,EAAE,GAAG,WAAW,CAAC;QAE3C;;WAEG;QACH,OAAO,IAAW,CAAC;KACtB;IAED;;OAEG;IACH,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;QAC5B,MAAM,IAAI,KAAK,CACX,+DAA0D,OAAO,MAAM,OAAG,CAC7E,CAAC;KACL;IAED,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;QAChC,MAAM,IAAI,KAAK,CACX,wDAA0D,CAC7D,CAAC;KACL;IAED,IAAI,OAAO,MAAM,CAAC,IAAI,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;QAChE,MAAM,IAAI,KAAK;QACX,2CAA2C;QAC3C,yGAAwG,OAAO,MAAM,CAAC,IAAI,OAAG,CAChI,CAAC;KACL;IAED;;OAEG;IACH,IAAM,IAAI,GAAoB,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;IAExD;;OAEG;IACH,mBAAoB,SAAoC;QACpD;;WAEG;QACF,SAA2B,CAAC,MAAM,GAAG,IAAI,CAAC;QAC1C,SAAiB,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;QAE3C;;UAEE;QACD,SAA2B,CAAC,EAAE,GAAG,WAAW,CAAC;QAC7C,SAAiB,CAAC,SAAS,CAAC,EAAE,GAAG,WAAW,CAAC;IAClD,CAAC;IAED,OAAO,SAAS,CAAC;AACrB,CAAC;AAzED,8BAyEC","sourcesContent":["import { EmptyUnit } from '..';\nimport { PluginInstanceWithDependencies } from '../plugin';\nimport { ServiceInstanceWithDependencies } from '../service';\n\nexport interface ComponentConfig {\n    type: string | string[];\n\n    dependencies?: {\n        plugins?: string[];\n        services?: string[];\n    };\n\n    [key: string]: any;\n}\n\nexport interface ComponentConfigWithDependencies extends ComponentConfig {\n    dependencies: {\n        plugins: string[];\n        services: string[];\n    };\n}\n\nexport interface ComponentUnit {\n    is: 'component';\n    config: ComponentConfig;\n\n    [key: string]: any;\n}\n\n// tslint:disable-next-line:no-empty-interface\nexport interface ComponentInstance extends ComponentUnit {}\n\nexport interface ComponentInstanceWithDependencies extends ComponentInstance {\n    config: ComponentConfigWithDependencies;\n\n    plugins: {\n        [key: string]: PluginInstanceWithDependencies;\n    };\n\n    services: {\n        [key: string]: ServiceInstanceWithDependencies;\n    };\n}\n\nexport function Component (config: any) {\n    /*\n     * Inheritance pattern\n     */\n    // @ts-ignore\n    if (this instanceof Component) {\n        // @ts-ignore\n        (this as ComponentUnit).is = 'component';\n\n        /*\n         * Break early since this is all we need\n         */\n        return null as any;\n    }\n\n    /*\n     * Minimal decorator pattern\n     */\n    if (typeof config === 'function') {\n        (config as ComponentUnit).is = 'component';\n        (config as any).prototype.is = 'component';\n\n        /*\n         * Break early since this is all we need\n         */\n        return null as any;\n    }\n\n    /*\n     * Check validity of the config\n     */\n    if (typeof config !== 'object') {\n        throw new Error(\n            `[Component] Invalid config, expected \"Object\" but got \"${typeof config}\"`,\n        );\n    }\n\n    if (!config.hasOwnProperty('type')) {\n        throw new Error(\n            `[Component] Invalid config, expected a \\`type\\` property`,\n        );\n    }\n\n    if (typeof config.type !== 'string' && !Array.isArray(config.type)) {\n        throw new Error(\n            // tslint:disable-next-line:max-line-length\n            `[Component] Invalid config, expected a string or array of strings for the property \\`type\\` but got \"${typeof config.type}\"`,\n        );\n    }\n\n    /*\n     * Create a copy of the config\n     */\n    const copy: ComponentConfig = Object.assign({}, config);\n\n    /**\n     * Extend a class with a Leverage Component Configuration\n     */\n    function decorator (component: ComponentUnit | EmptyUnit): void {\n        /*\n         * Extend the given component class\n         */\n        (component as ComponentUnit).config = copy;\n        (component as any).prototype.config = copy;\n\n        /*\n        * Set the kind of leverage unit this is\n        */\n        (component as ComponentUnit).is = 'component';\n        (component as any).prototype.is = 'component';\n    }\n\n    return decorator;\n}\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"1adc5c9f2e2f23827ca4aabb7ca5925eacb79173"}
,"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\component\\index.ts": {"path":"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\component\\index.ts","statementMap":{"0":{"start":{"line":3,"column":4},"end":{"line":3,"column":71}},"1":{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},"2":{"start":{"line":3,"column":53},"end":{"line":3,"column":71}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":33}}},"fnMap":{"0":{"name":"__export","decl":{"start":{"line":2,"column":9},"end":{"line":2,"column":17}},"loc":{"start":{"line":2,"column":21},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},"type":"if","locations":[{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},{"start":{"line":3,"column":21},"end":{"line":3,"column":71}}],"line":3}},"s":{"0":3,"1":3,"2":3,"3":3,"4":3},"f":{"0":3},"b":{"0":[3,0]},"inputSourceMap":{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";;;;;AAAA,iCAA4B","sourcesContent":["export * from './component';\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"c957c04b75b467c803def388154ea698b1efa206"}
,"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\manager\\index.ts": {"path":"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\manager\\index.ts","statementMap":{"0":{"start":{"line":3,"column":4},"end":{"line":3,"column":71}},"1":{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},"2":{"start":{"line":3,"column":53},"end":{"line":3,"column":71}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}}},"fnMap":{"0":{"name":"__export","decl":{"start":{"line":2,"column":9},"end":{"line":2,"column":17}},"loc":{"start":{"line":2,"column":21},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},"type":"if","locations":[{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},{"start":{"line":3,"column":21},"end":{"line":3,"column":71}}],"line":3}},"s":{"0":3,"1":3,"2":3,"3":3,"4":3},"f":{"0":3},"b":{"0":[3,0]},"inputSourceMap":{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";;;;;AAAA,+BAA0B","sourcesContent":["export * from './manager';\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"168f0895c264a86da9472cdaa37bf6f3d66effc6"}
,"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\manager\\manager.ts": {"path":"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\manager\\manager.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":29},"end":{"line":633,"column":3}},"2":{"start":{"line":5,"column":8},"end":{"line":11,"column":10}},"3":{"start":{"line":12,"column":8},"end":{"line":18,"column":10}},"4":{"start":{"line":19,"column":8},"end":{"line":25,"column":10}},"5":{"start":{"line":26,"column":8},"end":{"line":32,"column":10}},"6":{"start":{"line":34,"column":4},"end":{"line":99,"column":6}},"7":{"start":{"line":35,"column":20},"end":{"line":35,"column":22}},"8":{"start":{"line":36,"column":8},"end":{"line":38,"column":9}},"9":{"start":{"line":37,"column":12},"end":{"line":37,"column":38}},"10":{"start":{"line":39,"column":8},"end":{"line":98,"column":9}},"11":{"start":{"line":40,"column":23},"end":{"line":40,"column":34}},"12":{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},"13":{"start":{"line":45,"column":16},"end":{"line":45,"column":110}},"14":{"start":{"line":50,"column":27},"end":{"line":50,"column":56}},"15":{"start":{"line":54,"column":12},"end":{"line":56,"column":13}},"16":{"start":{"line":55,"column":16},"end":{"line":55,"column":88}},"17":{"start":{"line":60,"column":12},"end":{"line":63,"column":13}},"18":{"start":{"line":62,"column":16},"end":{"line":62,"column":133}},"19":{"start":{"line":64,"column":12},"end":{"line":67,"column":13}},"20":{"start":{"line":66,"column":16},"end":{"line":66,"column":126}},"21":{"start":{"line":71,"column":12},"end":{"line":76,"column":13}},"22":{"start":{"line":72,"column":16},"end":{"line":72,"column":68}},"23":{"start":{"line":75,"column":16},"end":{"line":75,"column":62}},"24":{"start":{"line":80,"column":12},"end":{"line":97,"column":13}},"25":{"start":{"line":82,"column":20},"end":{"line":82,"column":45}},"26":{"start":{"line":83,"column":20},"end":{"line":83,"column":26}},"27":{"start":{"line":85,"column":20},"end":{"line":85,"column":46}},"28":{"start":{"line":86,"column":20},"end":{"line":86,"column":26}},"29":{"start":{"line":88,"column":20},"end":{"line":88,"column":48}},"30":{"start":{"line":89,"column":20},"end":{"line":89,"column":26}},"31":{"start":{"line":91,"column":20},"end":{"line":91,"column":49}},"32":{"start":{"line":92,"column":20},"end":{"line":92,"column":26}},"33":{"start":{"line":95,"column":20},"end":{"line":96,"column":127}},"34":{"start":{"line":100,"column":4},"end":{"line":214,"column":6}},"35":{"start":{"line":104,"column":8},"end":{"line":106,"column":9}},"36":{"start":{"line":105,"column":12},"end":{"line":105,"column":99}},"37":{"start":{"line":107,"column":8},"end":{"line":110,"column":9}},"38":{"start":{"line":109,"column":12},"end":{"line":109,"column":116}},"39":{"start":{"line":111,"column":20},"end":{"line":111,"column":52}},"40":{"start":{"line":112,"column":20},"end":{"line":112,"column":24}},"41":{"start":{"line":116,"column":8},"end":{"line":133,"column":9}},"42":{"start":{"line":117,"column":25},"end":{"line":117,"column":31}},"43":{"start":{"line":118,"column":12},"end":{"line":132,"column":13}},"44":{"start":{"line":122,"column":16},"end":{"line":124,"column":17}},"45":{"start":{"line":123,"column":20},"end":{"line":123,"column":65}},"46":{"start":{"line":128,"column":16},"end":{"line":130,"column":17}},"47":{"start":{"line":129,"column":20},"end":{"line":129,"column":76}},"48":{"start":{"line":131,"column":16},"end":{"line":131,"column":30}},"49":{"start":{"line":134,"column":8},"end":{"line":136,"column":9}},"50":{"start":{"line":135,"column":12},"end":{"line":135,"column":25}},"51":{"start":{"line":140,"column":8},"end":{"line":157,"column":9}},"52":{"start":{"line":141,"column":26},"end":{"line":141,"column":32}},"53":{"start":{"line":142,"column":12},"end":{"line":156,"column":13}},"54":{"start":{"line":146,"column":16},"end":{"line":148,"column":17}},"55":{"start":{"line":147,"column":20},"end":{"line":147,"column":67}},"56":{"start":{"line":152,"column":16},"end":{"line":154,"column":17}},"57":{"start":{"line":153,"column":20},"end":{"line":153,"column":78}},"58":{"start":{"line":155,"column":16},"end":{"line":155,"column":30}},"59":{"start":{"line":158,"column":8},"end":{"line":160,"column":9}},"60":{"start":{"line":159,"column":12},"end":{"line":159,"column":25}},"61":{"start":{"line":164,"column":8},"end":{"line":176,"column":9}},"62":{"start":{"line":165,"column":25},"end":{"line":165,"column":31}},"63":{"start":{"line":166,"column":12},"end":{"line":166,"column":71}},"64":{"start":{"line":170,"column":12},"end":{"line":175,"column":13}},"65":{"start":{"line":171,"column":28},"end":{"line":171,"column":86}},"66":{"start":{"line":172,"column":16},"end":{"line":174,"column":17}},"67":{"start":{"line":173,"column":20},"end":{"line":173,"column":77}},"68":{"start":{"line":180,"column":8},"end":{"line":192,"column":9}},"69":{"start":{"line":181,"column":26},"end":{"line":181,"column":32}},"70":{"start":{"line":182,"column":12},"end":{"line":182,"column":75}},"71":{"start":{"line":186,"column":12},"end":{"line":191,"column":13}},"72":{"start":{"line":187,"column":28},"end":{"line":187,"column":88}},"73":{"start":{"line":188,"column":16},"end":{"line":190,"column":17}},"74":{"start":{"line":189,"column":20},"end":{"line":189,"column":79}},"75":{"start":{"line":196,"column":8},"end":{"line":212,"column":9}},"76":{"start":{"line":197,"column":23},"end":{"line":197,"column":34}},"77":{"start":{"line":201,"column":12},"end":{"line":201,"column":58}},"78":{"start":{"line":205,"column":12},"end":{"line":207,"column":13}},"79":{"start":{"line":206,"column":16},"end":{"line":206,"column":53}},"80":{"start":{"line":211,"column":12},"end":{"line":211,"column":60}},"81":{"start":{"line":213,"column":8},"end":{"line":213,"column":20}},"82":{"start":{"line":215,"column":4},"end":{"line":361,"column":6}},"83":{"start":{"line":219,"column":8},"end":{"line":221,"column":9}},"84":{"start":{"line":220,"column":12},"end":{"line":220,"column":96}},"85":{"start":{"line":222,"column":8},"end":{"line":225,"column":9}},"86":{"start":{"line":224,"column":12},"end":{"line":224,"column":113}},"87":{"start":{"line":226,"column":20},"end":{"line":226,"column":49}},"88":{"start":{"line":230,"column":8},"end":{"line":238,"column":9}},"89":{"start":{"line":231,"column":23},"end":{"line":231,"column":34}},"90":{"start":{"line":232,"column":12},"end":{"line":234,"column":13}},"91":{"start":{"line":233,"column":16},"end":{"line":233,"column":127}},"92":{"start":{"line":235,"column":12},"end":{"line":237,"column":13}},"93":{"start":{"line":236,"column":16},"end":{"line":236,"column":86}},"94":{"start":{"line":239,"column":20},"end":{"line":239,"column":24}},"95":{"start":{"line":243,"column":8},"end":{"line":260,"column":9}},"96":{"start":{"line":244,"column":23},"end":{"line":244,"column":29}},"97":{"start":{"line":245,"column":12},"end":{"line":259,"column":13}},"98":{"start":{"line":249,"column":16},"end":{"line":251,"column":17}},"99":{"start":{"line":250,"column":20},"end":{"line":250,"column":60}},"100":{"start":{"line":255,"column":16},"end":{"line":257,"column":17}},"101":{"start":{"line":256,"column":20},"end":{"line":256,"column":68}},"102":{"start":{"line":258,"column":16},"end":{"line":258,"column":30}},"103":{"start":{"line":261,"column":8},"end":{"line":263,"column":9}},"104":{"start":{"line":262,"column":12},"end":{"line":262,"column":25}},"105":{"start":{"line":267,"column":8},"end":{"line":284,"column":9}},"106":{"start":{"line":268,"column":26},"end":{"line":268,"column":32}},"107":{"start":{"line":269,"column":12},"end":{"line":283,"column":13}},"108":{"start":{"line":273,"column":16},"end":{"line":275,"column":17}},"109":{"start":{"line":274,"column":20},"end":{"line":274,"column":64}},"110":{"start":{"line":279,"column":16},"end":{"line":281,"column":17}},"111":{"start":{"line":280,"column":20},"end":{"line":280,"column":72}},"112":{"start":{"line":282,"column":16},"end":{"line":282,"column":30}},"113":{"start":{"line":285,"column":8},"end":{"line":287,"column":9}},"114":{"start":{"line":286,"column":12},"end":{"line":286,"column":25}},"115":{"start":{"line":291,"column":8},"end":{"line":303,"column":9}},"116":{"start":{"line":292,"column":23},"end":{"line":292,"column":29}},"117":{"start":{"line":293,"column":12},"end":{"line":293,"column":64}},"118":{"start":{"line":297,"column":12},"end":{"line":302,"column":13}},"119":{"start":{"line":298,"column":28},"end":{"line":298,"column":78}},"120":{"start":{"line":299,"column":16},"end":{"line":301,"column":17}},"121":{"start":{"line":300,"column":20},"end":{"line":300,"column":72}},"122":{"start":{"line":307,"column":8},"end":{"line":319,"column":9}},"123":{"start":{"line":308,"column":26},"end":{"line":308,"column":32}},"124":{"start":{"line":309,"column":12},"end":{"line":309,"column":72}},"125":{"start":{"line":313,"column":12},"end":{"line":318,"column":13}},"126":{"start":{"line":314,"column":28},"end":{"line":314,"column":82}},"127":{"start":{"line":315,"column":16},"end":{"line":317,"column":17}},"128":{"start":{"line":316,"column":20},"end":{"line":316,"column":76}},"129":{"start":{"line":323,"column":8},"end":{"line":359,"column":9}},"130":{"start":{"line":324,"column":23},"end":{"line":324,"column":34}},"131":{"start":{"line":328,"column":12},"end":{"line":330,"column":13}},"132":{"start":{"line":329,"column":16},"end":{"line":329,"column":93}},"133":{"start":{"line":331,"column":12},"end":{"line":331,"column":50}},"134":{"start":{"line":335,"column":12},"end":{"line":340,"column":13}},"135":{"start":{"line":336,"column":16},"end":{"line":339,"column":17}},"136":{"start":{"line":337,"column":31},"end":{"line":337,"column":37}},"137":{"start":{"line":338,"column":20},"end":{"line":338,"column":44}},"138":{"start":{"line":341,"column":12},"end":{"line":346,"column":13}},"139":{"start":{"line":342,"column":16},"end":{"line":345,"column":17}},"140":{"start":{"line":343,"column":31},"end":{"line":343,"column":37}},"141":{"start":{"line":344,"column":20},"end":{"line":344,"column":42}},"142":{"start":{"line":347,"column":12},"end":{"line":352,"column":13}},"143":{"start":{"line":348,"column":16},"end":{"line":351,"column":17}},"144":{"start":{"line":349,"column":31},"end":{"line":349,"column":37}},"145":{"start":{"line":350,"column":20},"end":{"line":350,"column":41}},"146":{"start":{"line":353,"column":12},"end":{"line":358,"column":13}},"147":{"start":{"line":354,"column":16},"end":{"line":357,"column":17}},"148":{"start":{"line":355,"column":31},"end":{"line":355,"column":37}},"149":{"start":{"line":356,"column":20},"end":{"line":356,"column":45}},"150":{"start":{"line":360,"column":8},"end":{"line":360,"column":20}},"151":{"start":{"line":362,"column":4},"end":{"line":488,"column":6}},"152":{"start":{"line":366,"column":8},"end":{"line":368,"column":9}},"153":{"start":{"line":367,"column":12},"end":{"line":367,"column":97}},"154":{"start":{"line":369,"column":8},"end":{"line":373,"column":9}},"155":{"start":{"line":371,"column":12},"end":{"line":372,"column":30}},"156":{"start":{"line":374,"column":20},"end":{"line":374,"column":24}},"157":{"start":{"line":378,"column":8},"end":{"line":395,"column":9}},"158":{"start":{"line":379,"column":23},"end":{"line":379,"column":29}},"159":{"start":{"line":380,"column":12},"end":{"line":394,"column":13}},"160":{"start":{"line":384,"column":16},"end":{"line":386,"column":17}},"161":{"start":{"line":385,"column":20},"end":{"line":385,"column":61}},"162":{"start":{"line":390,"column":16},"end":{"line":392,"column":17}},"163":{"start":{"line":391,"column":20},"end":{"line":391,"column":70}},"164":{"start":{"line":393,"column":16},"end":{"line":393,"column":30}},"165":{"start":{"line":396,"column":8},"end":{"line":398,"column":9}},"166":{"start":{"line":397,"column":12},"end":{"line":397,"column":25}},"167":{"start":{"line":402,"column":8},"end":{"line":419,"column":9}},"168":{"start":{"line":403,"column":23},"end":{"line":403,"column":29}},"169":{"start":{"line":404,"column":12},"end":{"line":418,"column":13}},"170":{"start":{"line":408,"column":16},"end":{"line":410,"column":17}},"171":{"start":{"line":409,"column":20},"end":{"line":409,"column":62}},"172":{"start":{"line":414,"column":16},"end":{"line":416,"column":17}},"173":{"start":{"line":415,"column":20},"end":{"line":415,"column":71}},"174":{"start":{"line":417,"column":16},"end":{"line":417,"column":30}},"175":{"start":{"line":420,"column":8},"end":{"line":422,"column":9}},"176":{"start":{"line":421,"column":12},"end":{"line":421,"column":25}},"177":{"start":{"line":426,"column":8},"end":{"line":438,"column":9}},"178":{"start":{"line":427,"column":23},"end":{"line":427,"column":29}},"179":{"start":{"line":428,"column":12},"end":{"line":428,"column":65}},"180":{"start":{"line":432,"column":12},"end":{"line":437,"column":13}},"181":{"start":{"line":433,"column":28},"end":{"line":433,"column":80}},"182":{"start":{"line":434,"column":16},"end":{"line":436,"column":17}},"183":{"start":{"line":435,"column":20},"end":{"line":435,"column":73}},"184":{"start":{"line":442,"column":8},"end":{"line":451,"column":9}},"185":{"start":{"line":443,"column":23},"end":{"line":443,"column":29}},"186":{"start":{"line":444,"column":12},"end":{"line":444,"column":67}},"187":{"start":{"line":445,"column":12},"end":{"line":450,"column":13}},"188":{"start":{"line":446,"column":28},"end":{"line":446,"column":81}},"189":{"start":{"line":447,"column":16},"end":{"line":449,"column":17}},"190":{"start":{"line":448,"column":20},"end":{"line":448,"column":74}},"191":{"start":{"line":455,"column":8},"end":{"line":458,"column":9}},"192":{"start":{"line":456,"column":12},"end":{"line":457,"column":49}},"193":{"start":{"line":459,"column":8},"end":{"line":459,"column":63}},"194":{"start":{"line":463,"column":8},"end":{"line":468,"column":9}},"195":{"start":{"line":464,"column":12},"end":{"line":467,"column":13}},"196":{"start":{"line":465,"column":27},"end":{"line":465,"column":33}},"197":{"start":{"line":466,"column":16},"end":{"line":466,"column":40}},"198":{"start":{"line":469,"column":8},"end":{"line":474,"column":9}},"199":{"start":{"line":470,"column":12},"end":{"line":473,"column":13}},"200":{"start":{"line":471,"column":27},"end":{"line":471,"column":33}},"201":{"start":{"line":472,"column":16},"end":{"line":472,"column":37}},"202":{"start":{"line":475,"column":8},"end":{"line":480,"column":9}},"203":{"start":{"line":476,"column":12},"end":{"line":479,"column":13}},"204":{"start":{"line":477,"column":27},"end":{"line":477,"column":33}},"205":{"start":{"line":478,"column":16},"end":{"line":478,"column":38}},"206":{"start":{"line":481,"column":8},"end":{"line":486,"column":9}},"207":{"start":{"line":482,"column":12},"end":{"line":485,"column":13}},"208":{"start":{"line":483,"column":27},"end":{"line":483,"column":33}},"209":{"start":{"line":484,"column":16},"end":{"line":484,"column":41}},"210":{"start":{"line":487,"column":8},"end":{"line":487,"column":20}},"211":{"start":{"line":489,"column":4},"end":{"line":606,"column":6}},"212":{"start":{"line":493,"column":8},"end":{"line":495,"column":9}},"213":{"start":{"line":494,"column":12},"end":{"line":494,"column":96}},"214":{"start":{"line":496,"column":8},"end":{"line":499,"column":9}},"215":{"start":{"line":498,"column":12},"end":{"line":498,"column":117}},"216":{"start":{"line":500,"column":20},"end":{"line":500,"column":53}},"217":{"start":{"line":501,"column":20},"end":{"line":501,"column":24}},"218":{"start":{"line":505,"column":8},"end":{"line":522,"column":9}},"219":{"start":{"line":506,"column":25},"end":{"line":506,"column":31}},"220":{"start":{"line":507,"column":12},"end":{"line":521,"column":13}},"221":{"start":{"line":511,"column":16},"end":{"line":513,"column":17}},"222":{"start":{"line":512,"column":20},"end":{"line":512,"column":65}},"223":{"start":{"line":517,"column":16},"end":{"line":519,"column":17}},"224":{"start":{"line":518,"column":20},"end":{"line":518,"column":77}},"225":{"start":{"line":520,"column":16},"end":{"line":520,"column":30}},"226":{"start":{"line":523,"column":8},"end":{"line":525,"column":9}},"227":{"start":{"line":524,"column":12},"end":{"line":524,"column":25}},"228":{"start":{"line":529,"column":8},"end":{"line":546,"column":9}},"229":{"start":{"line":530,"column":26},"end":{"line":530,"column":32}},"230":{"start":{"line":531,"column":12},"end":{"line":545,"column":13}},"231":{"start":{"line":535,"column":16},"end":{"line":537,"column":17}},"232":{"start":{"line":536,"column":20},"end":{"line":536,"column":67}},"233":{"start":{"line":541,"column":16},"end":{"line":543,"column":17}},"234":{"start":{"line":542,"column":20},"end":{"line":542,"column":79}},"235":{"start":{"line":544,"column":16},"end":{"line":544,"column":30}},"236":{"start":{"line":547,"column":8},"end":{"line":549,"column":9}},"237":{"start":{"line":548,"column":12},"end":{"line":548,"column":25}},"238":{"start":{"line":553,"column":8},"end":{"line":565,"column":9}},"239":{"start":{"line":554,"column":25},"end":{"line":554,"column":31}},"240":{"start":{"line":555,"column":12},"end":{"line":555,"column":72}},"241":{"start":{"line":559,"column":12},"end":{"line":564,"column":13}},"242":{"start":{"line":560,"column":28},"end":{"line":560,"column":87}},"243":{"start":{"line":561,"column":16},"end":{"line":563,"column":17}},"244":{"start":{"line":562,"column":20},"end":{"line":562,"column":77}},"245":{"start":{"line":569,"column":8},"end":{"line":581,"column":9}},"246":{"start":{"line":570,"column":26},"end":{"line":570,"column":32}},"247":{"start":{"line":571,"column":12},"end":{"line":571,"column":76}},"248":{"start":{"line":575,"column":12},"end":{"line":580,"column":13}},"249":{"start":{"line":576,"column":28},"end":{"line":576,"column":89}},"250":{"start":{"line":577,"column":16},"end":{"line":579,"column":17}},"251":{"start":{"line":578,"column":20},"end":{"line":578,"column":79}},"252":{"start":{"line":585,"column":8},"end":{"line":604,"column":9}},"253":{"start":{"line":586,"column":23},"end":{"line":586,"column":34}},"254":{"start":{"line":590,"column":23},"end":{"line":590,"column":51}},"255":{"start":{"line":591,"column":12},"end":{"line":593,"column":13}},"256":{"start":{"line":592,"column":16},"end":{"line":592,"column":44}},"257":{"start":{"line":597,"column":12},"end":{"line":599,"column":13}},"258":{"start":{"line":598,"column":16},"end":{"line":598,"column":53}},"259":{"start":{"line":603,"column":12},"end":{"line":603,"column":61}},"260":{"start":{"line":605,"column":8},"end":{"line":605,"column":20}},"261":{"start":{"line":607,"column":4},"end":{"line":614,"column":6}},"262":{"start":{"line":608,"column":8},"end":{"line":613,"column":9}},"263":{"start":{"line":609,"column":12},"end":{"line":609,"column":30}},"264":{"start":{"line":612,"column":12},"end":{"line":612,"column":24}},"265":{"start":{"line":615,"column":4},"end":{"line":631,"column":6}},"266":{"start":{"line":616,"column":8},"end":{"line":616,"column":56}},"267":{"start":{"line":616,"column":36},"end":{"line":616,"column":54}},"268":{"start":{"line":617,"column":8},"end":{"line":619,"column":9}},"269":{"start":{"line":618,"column":12},"end":{"line":618,"column":46}},"270":{"start":{"line":620,"column":8},"end":{"line":622,"column":9}},"271":{"start":{"line":621,"column":12},"end":{"line":621,"column":54}},"272":{"start":{"line":623,"column":8},"end":{"line":625,"column":9}},"273":{"start":{"line":624,"column":12},"end":{"line":624,"column":55}},"274":{"start":{"line":626,"column":8},"end":{"line":626,"column":30}},"275":{"start":{"line":627,"column":8},"end":{"line":627,"column":31}},"276":{"start":{"line":628,"column":8},"end":{"line":630,"column":9}},"277":{"start":{"line":629,"column":12},"end":{"line":629,"column":117}},"278":{"start":{"line":632,"column":4},"end":{"line":632,"column":19}},"279":{"start":{"line":634,"column":0},"end":{"line":634,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":3,"column":29},"end":{"line":3,"column":30}},"loc":{"start":{"line":3,"column":41},"end":{"line":633,"column":1}},"line":3},"1":{"name":"Manager","decl":{"start":{"line":4,"column":13},"end":{"line":4,"column":20}},"loc":{"start":{"line":4,"column":23},"end":{"line":33,"column":5}},"line":4},"2":{"name":"(anonymous_2)","decl":{"start":{"line":34,"column":28},"end":{"line":34,"column":29}},"loc":{"start":{"line":34,"column":40},"end":{"line":99,"column":5}},"line":34},"3":{"name":"(anonymous_3)","decl":{"start":{"line":100,"column":37},"end":{"line":100,"column":38}},"loc":{"start":{"line":100,"column":58},"end":{"line":214,"column":5}},"line":100},"4":{"name":"(anonymous_4)","decl":{"start":{"line":215,"column":34},"end":{"line":215,"column":35}},"loc":{"start":{"line":215,"column":52},"end":{"line":361,"column":5}},"line":215},"5":{"name":"(anonymous_5)","decl":{"start":{"line":362,"column":35},"end":{"line":362,"column":36}},"loc":{"start":{"line":362,"column":54},"end":{"line":488,"column":5}},"line":362},"6":{"name":"(anonymous_6)","decl":{"start":{"line":489,"column":38},"end":{"line":489,"column":39}},"loc":{"start":{"line":489,"column":60},"end":{"line":606,"column":5}},"line":489},"7":{"name":"(anonymous_7)","decl":{"start":{"line":607,"column":43},"end":{"line":607,"column":44}},"loc":{"start":{"line":607,"column":59},"end":{"line":614,"column":5}},"line":607},"8":{"name":"(anonymous_8)","decl":{"start":{"line":615,"column":55},"end":{"line":615,"column":56}},"loc":{"start":{"line":615,"column":86},"end":{"line":631,"column":5}},"line":615}},"branchMap":{"0":{"loc":{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},"type":"if","locations":[{"start":{"line":44,"column":12},"end":{"line":46,"column":13}},{"start":{"line":44,"column":12},"end":{"line":46,"column":13}}],"line":44},"1":{"loc":{"start":{"line":44,"column":16},"end":{"line":44,"column":70}},"type":"binary-expr","locations":[{"start":{"line":44,"column":16},"end":{"line":44,"column":40}},{"start":{"line":44,"column":44},"end":{"line":44,"column":70}}],"line":44},"2":{"loc":{"start":{"line":54,"column":12},"end":{"line":56,"column":13}},"type":"if","locations":[{"start":{"line":54,"column":12},"end":{"line":56,"column":13}},{"start":{"line":54,"column":12},"end":{"line":56,"column":13}}],"line":54},"3":{"loc":{"start":{"line":60,"column":12},"end":{"line":63,"column":13}},"type":"if","locations":[{"start":{"line":60,"column":12},"end":{"line":63,"column":13}},{"start":{"line":60,"column":12},"end":{"line":63,"column":13}}],"line":60},"4":{"loc":{"start":{"line":64,"column":12},"end":{"line":67,"column":13}},"type":"if","locations":[{"start":{"line":64,"column":12},"end":{"line":67,"column":13}},{"start":{"line":64,"column":12},"end":{"line":67,"column":13}}],"line":64},"5":{"loc":{"start":{"line":71,"column":12},"end":{"line":76,"column":13}},"type":"if","locations":[{"start":{"line":71,"column":12},"end":{"line":76,"column":13}},{"start":{"line":71,"column":12},"end":{"line":76,"column":13}}],"line":71},"6":{"loc":{"start":{"line":71,"column":16},"end":{"line":71,"column":75}},"type":"binary-expr","locations":[{"start":{"line":71,"column":16},"end":{"line":71,"column":43}},{"start":{"line":71,"column":47},"end":{"line":71,"column":75}}],"line":71},"7":{"loc":{"start":{"line":80,"column":12},"end":{"line":97,"column":13}},"type":"switch","locations":[{"start":{"line":81,"column":16},"end":{"line":83,"column":26}},{"start":{"line":84,"column":16},"end":{"line":86,"column":26}},{"start":{"line":87,"column":16},"end":{"line":89,"column":26}},{"start":{"line":90,"column":16},"end":{"line":92,"column":26}},{"start":{"line":93,"column":16},"end":{"line":96,"column":127}}],"line":80},"8":{"loc":{"start":{"line":104,"column":8},"end":{"line":106,"column":9}},"type":"if","locations":[{"start":{"line":104,"column":8},"end":{"line":106,"column":9}},{"start":{"line":104,"column":8},"end":{"line":106,"column":9}}],"line":104},"9":{"loc":{"start":{"line":107,"column":8},"end":{"line":110,"column":9}},"type":"if","locations":[{"start":{"line":107,"column":8},"end":{"line":110,"column":9}},{"start":{"line":107,"column":8},"end":{"line":110,"column":9}}],"line":107},"10":{"loc":{"start":{"line":107,"column":12},"end":{"line":108,"column":49}},"type":"binary-expr","locations":[{"start":{"line":107,"column":12},"end":{"line":107,"column":53}},{"start":{"line":108,"column":12},"end":{"line":108,"column":49}}],"line":107},"11":{"loc":{"start":{"line":118,"column":12},"end":{"line":132,"column":13}},"type":"if","locations":[{"start":{"line":118,"column":12},"end":{"line":132,"column":13}},{"start":{"line":118,"column":12},"end":{"line":132,"column":13}}],"line":118},"12":{"loc":{"start":{"line":122,"column":16},"end":{"line":124,"column":17}},"type":"if","locations":[{"start":{"line":122,"column":16},"end":{"line":124,"column":17}},{"start":{"line":122,"column":16},"end":{"line":124,"column":17}}],"line":122},"13":{"loc":{"start":{"line":128,"column":16},"end":{"line":130,"column":17}},"type":"if","locations":[{"start":{"line":128,"column":16},"end":{"line":130,"column":17}},{"start":{"line":128,"column":16},"end":{"line":130,"column":17}}],"line":128},"14":{"loc":{"start":{"line":134,"column":8},"end":{"line":136,"column":9}},"type":"if","locations":[{"start":{"line":134,"column":8},"end":{"line":136,"column":9}},{"start":{"line":134,"column":8},"end":{"line":136,"column":9}}],"line":134},"15":{"loc":{"start":{"line":142,"column":12},"end":{"line":156,"column":13}},"type":"if","locations":[{"start":{"line":142,"column":12},"end":{"line":156,"column":13}},{"start":{"line":142,"column":12},"end":{"line":156,"column":13}}],"line":142},"16":{"loc":{"start":{"line":146,"column":16},"end":{"line":148,"column":17}},"type":"if","locations":[{"start":{"line":146,"column":16},"end":{"line":148,"column":17}},{"start":{"line":146,"column":16},"end":{"line":148,"column":17}}],"line":146},"17":{"loc":{"start":{"line":152,"column":16},"end":{"line":154,"column":17}},"type":"if","locations":[{"start":{"line":152,"column":16},"end":{"line":154,"column":17}},{"start":{"line":152,"column":16},"end":{"line":154,"column":17}}],"line":152},"18":{"loc":{"start":{"line":158,"column":8},"end":{"line":160,"column":9}},"type":"if","locations":[{"start":{"line":158,"column":8},"end":{"line":160,"column":9}},{"start":{"line":158,"column":8},"end":{"line":160,"column":9}}],"line":158},"19":{"loc":{"start":{"line":170,"column":12},"end":{"line":175,"column":13}},"type":"if","locations":[{"start":{"line":170,"column":12},"end":{"line":175,"column":13}},{"start":{"line":170,"column":12},"end":{"line":175,"column":13}}],"line":170},"20":{"loc":{"start":{"line":172,"column":16},"end":{"line":174,"column":17}},"type":"if","locations":[{"start":{"line":172,"column":16},"end":{"line":174,"column":17}},{"start":{"line":172,"column":16},"end":{"line":174,"column":17}}],"line":172},"21":{"loc":{"start":{"line":186,"column":12},"end":{"line":191,"column":13}},"type":"if","locations":[{"start":{"line":186,"column":12},"end":{"line":191,"column":13}},{"start":{"line":186,"column":12},"end":{"line":191,"column":13}}],"line":186},"22":{"loc":{"start":{"line":188,"column":16},"end":{"line":190,"column":17}},"type":"if","locations":[{"start":{"line":188,"column":16},"end":{"line":190,"column":17}},{"start":{"line":188,"column":16},"end":{"line":190,"column":17}}],"line":188},"23":{"loc":{"start":{"line":205,"column":12},"end":{"line":207,"column":13}},"type":"if","locations":[{"start":{"line":205,"column":12},"end":{"line":207,"column":13}},{"start":{"line":205,"column":12},"end":{"line":207,"column":13}}],"line":205},"24":{"loc":{"start":{"line":219,"column":8},"end":{"line":221,"column":9}},"type":"if","locations":[{"start":{"line":219,"column":8},"end":{"line":221,"column":9}},{"start":{"line":219,"column":8},"end":{"line":221,"column":9}}],"line":219},"25":{"loc":{"start":{"line":222,"column":8},"end":{"line":225,"column":9}},"type":"if","locations":[{"start":{"line":222,"column":8},"end":{"line":225,"column":9}},{"start":{"line":222,"column":8},"end":{"line":225,"column":9}}],"line":222},"26":{"loc":{"start":{"line":222,"column":12},"end":{"line":223,"column":46}},"type":"binary-expr","locations":[{"start":{"line":222,"column":12},"end":{"line":222,"column":50}},{"start":{"line":223,"column":12},"end":{"line":223,"column":46}}],"line":222},"27":{"loc":{"start":{"line":232,"column":12},"end":{"line":234,"column":13}},"type":"if","locations":[{"start":{"line":232,"column":12},"end":{"line":234,"column":13}},{"start":{"line":232,"column":12},"end":{"line":234,"column":13}}],"line":232},"28":{"loc":{"start":{"line":235,"column":12},"end":{"line":237,"column":13}},"type":"if","locations":[{"start":{"line":235,"column":12},"end":{"line":237,"column":13}},{"start":{"line":235,"column":12},"end":{"line":237,"column":13}}],"line":235},"29":{"loc":{"start":{"line":245,"column":12},"end":{"line":259,"column":13}},"type":"if","locations":[{"start":{"line":245,"column":12},"end":{"line":259,"column":13}},{"start":{"line":245,"column":12},"end":{"line":259,"column":13}}],"line":245},"30":{"loc":{"start":{"line":249,"column":16},"end":{"line":251,"column":17}},"type":"if","locations":[{"start":{"line":249,"column":16},"end":{"line":251,"column":17}},{"start":{"line":249,"column":16},"end":{"line":251,"column":17}}],"line":249},"31":{"loc":{"start":{"line":255,"column":16},"end":{"line":257,"column":17}},"type":"if","locations":[{"start":{"line":255,"column":16},"end":{"line":257,"column":17}},{"start":{"line":255,"column":16},"end":{"line":257,"column":17}}],"line":255},"32":{"loc":{"start":{"line":261,"column":8},"end":{"line":263,"column":9}},"type":"if","locations":[{"start":{"line":261,"column":8},"end":{"line":263,"column":9}},{"start":{"line":261,"column":8},"end":{"line":263,"column":9}}],"line":261},"33":{"loc":{"start":{"line":269,"column":12},"end":{"line":283,"column":13}},"type":"if","locations":[{"start":{"line":269,"column":12},"end":{"line":283,"column":13}},{"start":{"line":269,"column":12},"end":{"line":283,"column":13}}],"line":269},"34":{"loc":{"start":{"line":273,"column":16},"end":{"line":275,"column":17}},"type":"if","locations":[{"start":{"line":273,"column":16},"end":{"line":275,"column":17}},{"start":{"line":273,"column":16},"end":{"line":275,"column":17}}],"line":273},"35":{"loc":{"start":{"line":279,"column":16},"end":{"line":281,"column":17}},"type":"if","locations":[{"start":{"line":279,"column":16},"end":{"line":281,"column":17}},{"start":{"line":279,"column":16},"end":{"line":281,"column":17}}],"line":279},"36":{"loc":{"start":{"line":285,"column":8},"end":{"line":287,"column":9}},"type":"if","locations":[{"start":{"line":285,"column":8},"end":{"line":287,"column":9}},{"start":{"line":285,"column":8},"end":{"line":287,"column":9}}],"line":285},"37":{"loc":{"start":{"line":297,"column":12},"end":{"line":302,"column":13}},"type":"if","locations":[{"start":{"line":297,"column":12},"end":{"line":302,"column":13}},{"start":{"line":297,"column":12},"end":{"line":302,"column":13}}],"line":297},"38":{"loc":{"start":{"line":299,"column":16},"end":{"line":301,"column":17}},"type":"if","locations":[{"start":{"line":299,"column":16},"end":{"line":301,"column":17}},{"start":{"line":299,"column":16},"end":{"line":301,"column":17}}],"line":299},"39":{"loc":{"start":{"line":313,"column":12},"end":{"line":318,"column":13}},"type":"if","locations":[{"start":{"line":313,"column":12},"end":{"line":318,"column":13}},{"start":{"line":313,"column":12},"end":{"line":318,"column":13}}],"line":313},"40":{"loc":{"start":{"line":315,"column":16},"end":{"line":317,"column":17}},"type":"if","locations":[{"start":{"line":315,"column":16},"end":{"line":317,"column":17}},{"start":{"line":315,"column":16},"end":{"line":317,"column":17}}],"line":315},"41":{"loc":{"start":{"line":328,"column":12},"end":{"line":330,"column":13}},"type":"if","locations":[{"start":{"line":328,"column":12},"end":{"line":330,"column":13}},{"start":{"line":328,"column":12},"end":{"line":330,"column":13}}],"line":328},"42":{"loc":{"start":{"line":335,"column":12},"end":{"line":340,"column":13}},"type":"if","locations":[{"start":{"line":335,"column":12},"end":{"line":340,"column":13}},{"start":{"line":335,"column":12},"end":{"line":340,"column":13}}],"line":335},"43":{"loc":{"start":{"line":341,"column":12},"end":{"line":346,"column":13}},"type":"if","locations":[{"start":{"line":341,"column":12},"end":{"line":346,"column":13}},{"start":{"line":341,"column":12},"end":{"line":346,"column":13}}],"line":341},"44":{"loc":{"start":{"line":347,"column":12},"end":{"line":352,"column":13}},"type":"if","locations":[{"start":{"line":347,"column":12},"end":{"line":352,"column":13}},{"start":{"line":347,"column":12},"end":{"line":352,"column":13}}],"line":347},"45":{"loc":{"start":{"line":353,"column":12},"end":{"line":358,"column":13}},"type":"if","locations":[{"start":{"line":353,"column":12},"end":{"line":358,"column":13}},{"start":{"line":353,"column":12},"end":{"line":358,"column":13}}],"line":353},"46":{"loc":{"start":{"line":366,"column":8},"end":{"line":368,"column":9}},"type":"if","locations":[{"start":{"line":366,"column":8},"end":{"line":368,"column":9}},{"start":{"line":366,"column":8},"end":{"line":368,"column":9}}],"line":366},"47":{"loc":{"start":{"line":369,"column":8},"end":{"line":373,"column":9}},"type":"if","locations":[{"start":{"line":369,"column":8},"end":{"line":373,"column":9}},{"start":{"line":369,"column":8},"end":{"line":373,"column":9}}],"line":369},"48":{"loc":{"start":{"line":380,"column":12},"end":{"line":394,"column":13}},"type":"if","locations":[{"start":{"line":380,"column":12},"end":{"line":394,"column":13}},{"start":{"line":380,"column":12},"end":{"line":394,"column":13}}],"line":380},"49":{"loc":{"start":{"line":384,"column":16},"end":{"line":386,"column":17}},"type":"if","locations":[{"start":{"line":384,"column":16},"end":{"line":386,"column":17}},{"start":{"line":384,"column":16},"end":{"line":386,"column":17}}],"line":384},"50":{"loc":{"start":{"line":390,"column":16},"end":{"line":392,"column":17}},"type":"if","locations":[{"start":{"line":390,"column":16},"end":{"line":392,"column":17}},{"start":{"line":390,"column":16},"end":{"line":392,"column":17}}],"line":390},"51":{"loc":{"start":{"line":396,"column":8},"end":{"line":398,"column":9}},"type":"if","locations":[{"start":{"line":396,"column":8},"end":{"line":398,"column":9}},{"start":{"line":396,"column":8},"end":{"line":398,"column":9}}],"line":396},"52":{"loc":{"start":{"line":404,"column":12},"end":{"line":418,"column":13}},"type":"if","locations":[{"start":{"line":404,"column":12},"end":{"line":418,"column":13}},{"start":{"line":404,"column":12},"end":{"line":418,"column":13}}],"line":404},"53":{"loc":{"start":{"line":408,"column":16},"end":{"line":410,"column":17}},"type":"if","locations":[{"start":{"line":408,"column":16},"end":{"line":410,"column":17}},{"start":{"line":408,"column":16},"end":{"line":410,"column":17}}],"line":408},"54":{"loc":{"start":{"line":414,"column":16},"end":{"line":416,"column":17}},"type":"if","locations":[{"start":{"line":414,"column":16},"end":{"line":416,"column":17}},{"start":{"line":414,"column":16},"end":{"line":416,"column":17}}],"line":414},"55":{"loc":{"start":{"line":420,"column":8},"end":{"line":422,"column":9}},"type":"if","locations":[{"start":{"line":420,"column":8},"end":{"line":422,"column":9}},{"start":{"line":420,"column":8},"end":{"line":422,"column":9}}],"line":420},"56":{"loc":{"start":{"line":432,"column":12},"end":{"line":437,"column":13}},"type":"if","locations":[{"start":{"line":432,"column":12},"end":{"line":437,"column":13}},{"start":{"line":432,"column":12},"end":{"line":437,"column":13}}],"line":432},"57":{"loc":{"start":{"line":434,"column":16},"end":{"line":436,"column":17}},"type":"if","locations":[{"start":{"line":434,"column":16},"end":{"line":436,"column":17}},{"start":{"line":434,"column":16},"end":{"line":436,"column":17}}],"line":434},"58":{"loc":{"start":{"line":445,"column":12},"end":{"line":450,"column":13}},"type":"if","locations":[{"start":{"line":445,"column":12},"end":{"line":450,"column":13}},{"start":{"line":445,"column":12},"end":{"line":450,"column":13}}],"line":445},"59":{"loc":{"start":{"line":447,"column":16},"end":{"line":449,"column":17}},"type":"if","locations":[{"start":{"line":447,"column":16},"end":{"line":449,"column":17}},{"start":{"line":447,"column":16},"end":{"line":449,"column":17}}],"line":447},"60":{"loc":{"start":{"line":455,"column":8},"end":{"line":458,"column":9}},"type":"if","locations":[{"start":{"line":455,"column":8},"end":{"line":458,"column":9}},{"start":{"line":455,"column":8},"end":{"line":458,"column":9}}],"line":455},"61":{"loc":{"start":{"line":463,"column":8},"end":{"line":468,"column":9}},"type":"if","locations":[{"start":{"line":463,"column":8},"end":{"line":468,"column":9}},{"start":{"line":463,"column":8},"end":{"line":468,"column":9}}],"line":463},"62":{"loc":{"start":{"line":469,"column":8},"end":{"line":474,"column":9}},"type":"if","locations":[{"start":{"line":469,"column":8},"end":{"line":474,"column":9}},{"start":{"line":469,"column":8},"end":{"line":474,"column":9}}],"line":469},"63":{"loc":{"start":{"line":475,"column":8},"end":{"line":480,"column":9}},"type":"if","locations":[{"start":{"line":475,"column":8},"end":{"line":480,"column":9}},{"start":{"line":475,"column":8},"end":{"line":480,"column":9}}],"line":475},"64":{"loc":{"start":{"line":481,"column":8},"end":{"line":486,"column":9}},"type":"if","locations":[{"start":{"line":481,"column":8},"end":{"line":486,"column":9}},{"start":{"line":481,"column":8},"end":{"line":486,"column":9}}],"line":481},"65":{"loc":{"start":{"line":493,"column":8},"end":{"line":495,"column":9}},"type":"if","locations":[{"start":{"line":493,"column":8},"end":{"line":495,"column":9}},{"start":{"line":493,"column":8},"end":{"line":495,"column":9}}],"line":493},"66":{"loc":{"start":{"line":496,"column":8},"end":{"line":499,"column":9}},"type":"if","locations":[{"start":{"line":496,"column":8},"end":{"line":499,"column":9}},{"start":{"line":496,"column":8},"end":{"line":499,"column":9}}],"line":496},"67":{"loc":{"start":{"line":496,"column":12},"end":{"line":497,"column":50}},"type":"binary-expr","locations":[{"start":{"line":496,"column":12},"end":{"line":496,"column":54}},{"start":{"line":497,"column":12},"end":{"line":497,"column":50}}],"line":496},"68":{"loc":{"start":{"line":507,"column":12},"end":{"line":521,"column":13}},"type":"if","locations":[{"start":{"line":507,"column":12},"end":{"line":521,"column":13}},{"start":{"line":507,"column":12},"end":{"line":521,"column":13}}],"line":507},"69":{"loc":{"start":{"line":511,"column":16},"end":{"line":513,"column":17}},"type":"if","locations":[{"start":{"line":511,"column":16},"end":{"line":513,"column":17}},{"start":{"line":511,"column":16},"end":{"line":513,"column":17}}],"line":511},"70":{"loc":{"start":{"line":517,"column":16},"end":{"line":519,"column":17}},"type":"if","locations":[{"start":{"line":517,"column":16},"end":{"line":519,"column":17}},{"start":{"line":517,"column":16},"end":{"line":519,"column":17}}],"line":517},"71":{"loc":{"start":{"line":523,"column":8},"end":{"line":525,"column":9}},"type":"if","locations":[{"start":{"line":523,"column":8},"end":{"line":525,"column":9}},{"start":{"line":523,"column":8},"end":{"line":525,"column":9}}],"line":523},"72":{"loc":{"start":{"line":531,"column":12},"end":{"line":545,"column":13}},"type":"if","locations":[{"start":{"line":531,"column":12},"end":{"line":545,"column":13}},{"start":{"line":531,"column":12},"end":{"line":545,"column":13}}],"line":531},"73":{"loc":{"start":{"line":535,"column":16},"end":{"line":537,"column":17}},"type":"if","locations":[{"start":{"line":535,"column":16},"end":{"line":537,"column":17}},{"start":{"line":535,"column":16},"end":{"line":537,"column":17}}],"line":535},"74":{"loc":{"start":{"line":541,"column":16},"end":{"line":543,"column":17}},"type":"if","locations":[{"start":{"line":541,"column":16},"end":{"line":543,"column":17}},{"start":{"line":541,"column":16},"end":{"line":543,"column":17}}],"line":541},"75":{"loc":{"start":{"line":547,"column":8},"end":{"line":549,"column":9}},"type":"if","locations":[{"start":{"line":547,"column":8},"end":{"line":549,"column":9}},{"start":{"line":547,"column":8},"end":{"line":549,"column":9}}],"line":547},"76":{"loc":{"start":{"line":559,"column":12},"end":{"line":564,"column":13}},"type":"if","locations":[{"start":{"line":559,"column":12},"end":{"line":564,"column":13}},{"start":{"line":559,"column":12},"end":{"line":564,"column":13}}],"line":559},"77":{"loc":{"start":{"line":561,"column":16},"end":{"line":563,"column":17}},"type":"if","locations":[{"start":{"line":561,"column":16},"end":{"line":563,"column":17}},{"start":{"line":561,"column":16},"end":{"line":563,"column":17}}],"line":561},"78":{"loc":{"start":{"line":575,"column":12},"end":{"line":580,"column":13}},"type":"if","locations":[{"start":{"line":575,"column":12},"end":{"line":580,"column":13}},{"start":{"line":575,"column":12},"end":{"line":580,"column":13}}],"line":575},"79":{"loc":{"start":{"line":577,"column":16},"end":{"line":579,"column":17}},"type":"if","locations":[{"start":{"line":577,"column":16},"end":{"line":579,"column":17}},{"start":{"line":577,"column":16},"end":{"line":579,"column":17}}],"line":577},"80":{"loc":{"start":{"line":591,"column":12},"end":{"line":593,"column":13}},"type":"if","locations":[{"start":{"line":591,"column":12},"end":{"line":593,"column":13}},{"start":{"line":591,"column":12},"end":{"line":593,"column":13}}],"line":591},"81":{"loc":{"start":{"line":591,"column":16},"end":{"line":591,"column":72}},"type":"binary-expr","locations":[{"start":{"line":591,"column":16},"end":{"line":591,"column":31}},{"start":{"line":591,"column":35},"end":{"line":591,"column":72}}],"line":591},"82":{"loc":{"start":{"line":597,"column":12},"end":{"line":599,"column":13}},"type":"if","locations":[{"start":{"line":597,"column":12},"end":{"line":599,"column":13}},{"start":{"line":597,"column":12},"end":{"line":599,"column":13}}],"line":597},"83":{"loc":{"start":{"line":608,"column":8},"end":{"line":613,"column":9}},"type":"if","locations":[{"start":{"line":608,"column":8},"end":{"line":613,"column":9}},{"start":{"line":608,"column":8},"end":{"line":613,"column":9}}],"line":608},"84":{"loc":{"start":{"line":616,"column":8},"end":{"line":616,"column":56}},"type":"if","locations":[{"start":{"line":616,"column":8},"end":{"line":616,"column":56}},{"start":{"line":616,"column":8},"end":{"line":616,"column":56}}],"line":616},"85":{"loc":{"start":{"line":617,"column":8},"end":{"line":619,"column":9}},"type":"if","locations":[{"start":{"line":617,"column":8},"end":{"line":619,"column":9}},{"start":{"line":617,"column":8},"end":{"line":619,"column":9}}],"line":617},"86":{"loc":{"start":{"line":620,"column":8},"end":{"line":622,"column":9}},"type":"if","locations":[{"start":{"line":620,"column":8},"end":{"line":622,"column":9}},{"start":{"line":620,"column":8},"end":{"line":622,"column":9}}],"line":620},"87":{"loc":{"start":{"line":623,"column":8},"end":{"line":625,"column":9}},"type":"if","locations":[{"start":{"line":623,"column":8},"end":{"line":625,"column":9}},{"start":{"line":623,"column":8},"end":{"line":625,"column":9}}],"line":623},"88":{"loc":{"start":{"line":628,"column":8},"end":{"line":630,"column":9}},"type":"if","locations":[{"start":{"line":628,"column":8},"end":{"line":630,"column":9}},{"start":{"line":628,"column":8},"end":{"line":630,"column":9}}],"line":628}},"s":{"0":3,"1":3,"2":29,"3":29,"4":29,"5":29,"6":3,"7":36,"8":36,"9":36,"10":36,"11":36,"12":36,"13":2,"14":34,"15":34,"16":2,"17":32,"18":4,"19":28,"20":2,"21":26,"22":7,"23":19,"24":26,"25":10,"26":8,"27":8,"28":8,"29":5,"30":5,"31":2,"32":2,"33":1,"34":3,"35":12,"36":1,"37":11,"38":2,"39":9,"40":9,"41":9,"42":10,"43":10,"44":4,"45":4,"46":4,"47":4,"48":4,"49":9,"50":4,"51":5,"52":4,"53":4,"54":2,"55":2,"56":2,"57":2,"58":2,"59":5,"60":2,"61":3,"62":4,"63":4,"64":4,"65":1,"66":1,"67":1,"68":3,"69":2,"70":2,"71":2,"72":2,"73":2,"74":2,"75":3,"76":4,"77":4,"78":4,"79":4,"80":4,"81":3,"82":3,"83":22,"84":1,"85":21,"86":3,"87":18,"88":18,"89":18,"90":18,"91":1,"92":17,"93":3,"94":14,"95":14,"96":2,"97":2,"98":1,"99":1,"100":1,"101":1,"102":1,"103":14,"104":1,"105":13,"106":6,"107":6,"108":3,"109":2,"110":3,"111":2,"112":3,"113":13,"114":2,"115":11,"116":1,"117":1,"118":1,"119":1,"120":1,"121":1,"122":11,"123":2,"124":2,"125":2,"126":2,"127":2,"128":2,"129":11,"130":11,"131":11,"132":2,"133":9,"134":9,"135":1,"136":1,"137":1,"138":9,"139":1,"140":1,"141":1,"142":9,"143":1,"144":1,"145":1,"146":9,"147":1,"148":1,"149":1,"150":9,"151":3,"152":18,"153":1,"154":17,"155":3,"156":14,"157":14,"158":2,"159":2,"160":1,"161":1,"162":1,"163":1,"164":1,"165":14,"166":1,"167":13,"168":2,"169":2,"170":1,"171":1,"172":1,"173":1,"174":1,"175":13,"176":1,"177":12,"178":1,"179":1,"180":1,"181":1,"182":1,"183":1,"184":12,"185":1,"186":1,"187":1,"188":1,"189":1,"190":1,"191":12,"192":2,"193":10,"194":10,"195":2,"196":2,"197":2,"198":10,"199":2,"200":2,"201":2,"202":10,"203":1,"204":1,"205":1,"206":10,"207":1,"208":1,"209":1,"210":10,"211":3,"212":10,"213":1,"214":9,"215":4,"216":5,"217":5,"218":5,"219":5,"220":5,"221":3,"222":3,"223":3,"224":3,"225":3,"226":5,"227":3,"228":2,"229":2,"230":2,"231":1,"232":1,"233":1,"234":1,"235":1,"236":2,"237":1,"238":1,"239":1,"240":1,"241":1,"242":1,"243":1,"244":1,"245":1,"246":1,"247":1,"248":1,"249":1,"250":1,"251":1,"252":1,"253":1,"254":1,"255":1,"256":1,"257":1,"258":1,"259":1,"260":1,"261":3,"262":34,"263":1,"264":33,"265":3,"266":26,"267":19,"268":26,"269":18,"270":26,"271":23,"272":26,"273":20,"274":26,"275":26,"276":26,"277":7,"278":3,"279":3},"f":{"0":3,"1":29,"2":36,"3":12,"4":22,"5":18,"6":10,"7":34,"8":26},"b":{"0":[2,34],"1":[36,3],"2":[2,32],"3":[4,28],"4":[2,26],"5":[7,19],"6":[26,21],"7":[10,8,5,2,1],"8":[1,11],"9":[2,9],"10":[11,3],"11":[4,6],"12":[4,0],"13":[4,0],"14":[4,5],"15":[2,2],"16":[2,0],"17":[2,0],"18":[2,3],"19":[1,3],"20":[1,0],"21":[2,0],"22":[2,0],"23":[4,0],"24":[1,21],"25":[3,18],"26":[21,3],"27":[1,17],"28":[3,14],"29":[1,1],"30":[1,0],"31":[1,0],"32":[1,13],"33":[3,3],"34":[2,1],"35":[2,1],"36":[2,11],"37":[1,0],"38":[1,0],"39":[2,0],"40":[2,0],"41":[2,9],"42":[1,8],"43":[1,8],"44":[1,8],"45":[1,8],"46":[1,17],"47":[3,14],"48":[1,1],"49":[1,0],"50":[1,0],"51":[1,13],"52":[1,1],"53":[1,0],"54":[1,0],"55":[1,12],"56":[1,0],"57":[1,0],"58":[1,0],"59":[1,0],"60":[2,10],"61":[2,8],"62":[2,8],"63":[1,9],"64":[1,9],"65":[1,9],"66":[4,5],"67":[9,4],"68":[3,2],"69":[3,0],"70":[3,0],"71":[3,2],"72":[1,1],"73":[1,0],"74":[1,0],"75":[1,1],"76":[1,0],"77":[1,0],"78":[1,0],"79":[1,0],"80":[1,0],"81":[1,1],"82":[1,0],"83":[1,33],"84":[19,7],"85":[18,8],"86":[23,3],"87":[20,6],"88":[7,19]},"inputSourceMap":{"version":3,"file":"manager.js","sourceRoot":"","sources":["manager.ts"],"names":[],"mappings":";;AAiEA;IAMI;QACI,IAAI,CAAC,OAAO,GAAG;YACX,OAAO,EAAE;gBACL,OAAO,EAAE,EAAE;gBACX,QAAQ,EAAE,EAAE;aACf;YACD,SAAS,EAAE,EAAE;SAChB,CAAC;QAEF,IAAI,CAAC,QAAQ,GAAG;YACZ,OAAO,EAAE;gBACL,OAAO,EAAE,EAAE;gBACX,QAAQ,EAAE,EAAE;aACf;YACD,SAAS,EAAE,EAAE;SAChB,CAAC;QAEF,IAAI,CAAC,UAAU,GAAG;YACd,OAAO,EAAE;gBACL,OAAO,EAAE,EAAE;gBACX,QAAQ,EAAE,EAAE;aACf;YACD,SAAS,EAAE,EAAE;SAChB,CAAC;QAEF,IAAI,CAAC,UAAU,GAAG;YACd,OAAO,EAAE;gBACL,OAAO,EAAE,EAAE;gBACX,QAAQ,EAAE,EAAE;aACf;YACD,SAAS,EAAE,EAAE;SAChB,CAAC;IACN,CAAC;IAED,qBAAG,GAAH;QAAK,eAAyC;aAAzC,UAAyC,EAAzC,qBAAyC,EAAzC,IAAyC;YAAzC,0BAAyC;;QAC1C,KAAmB,UAAK,EAAL,eAAK,EAAL,mBAAK,EAAL,IAAK,EAAE;YAArB,IAAM,IAAI,cAAA;YACX;;eAEG;YACH,IAAI,OAAO,IAAI,KAAK,QAAQ,IAAI,OAAO,IAAI,KAAK,UAAU,EAAE;gBACxD,MAAM,IAAI,KAAK,CACX,4EAA4E,CAC/E,CAAC;aACL;YAED;;eAEG;YACH,IAAM,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;YAE/C;;eAEG;YACH,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;gBACd,MAAM,IAAI,KAAK,CACX,sDAAwD,CAC3D,CAAC;aACL;YAED;;eAEG;YACH,IAAI,OAAO,QAAQ,CAAC,MAAM,KAAK,QAAQ,EAAE;gBACrC,2CAA2C;gBAC3C,MAAM,IAAI,KAAK,CACX,sEAAiE,OAAO,QAAQ,CAAC,MAAM,OAAG,CAC7F,CAAC;aACL;YAED,IAAI,OAAO,QAAQ,CAAC,EAAE,KAAK,QAAQ,EAAE;gBACjC,2CAA2C;gBAC3C,MAAM,IAAI,KAAK,CACX,mEAAgE,OAAO,QAAQ,CAAC,EAAE,OAAG,CACxF,CAAC;aACL;YAED;;eAEG;YACH,IAAI,QAAQ,CAAC,EAAE,KAAK,WAAW,IAAI,QAAQ,CAAC,EAAE,KAAK,YAAY,EAAE;gBAC7D,IAAI,CAAC,8BAA8B,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;aACvD;iBAAM;gBACH,IAAI,CAAC,8BAA8B,CAAC,QAAQ,CAAC,CAAC;aACjD;YAED;;eAEG;YACH,QAAQ,QAAQ,CAAC,EAAE,EAAE;gBACjB,KAAK,QAAQ;oBACT,IAAI,CAAC,SAAS,CAAC,QAA0C,CAAC,CAAC;oBAC3D,MAAM;gBAEV,KAAK,SAAS;oBACV,IAAI,CAAC,UAAU,CACX,QAA2C,CAC9C,CAAC;oBACF,MAAM;gBAEV,KAAK,WAAW;oBACZ,IAAI,CAAC,YAAY,CACb,QAA6C,CAChD,CAAC;oBACF,MAAM;gBAEV,KAAK,YAAY;oBACb,IAAI,CAAC,aAAa,CACd,QAA8C,CACjD,CAAC;oBACF,MAAM;gBAEV;oBACI,2CAA2C;oBAC3C,MAAM,IAAI,KAAK,CACX,oCAAiC,QAAQ,CAAC,MAAM;yBAC3C,EAAE,kGAAsF,CAChG,CAAC;aACT;SACJ;IACL,CAAC;IAED,8BAAY,GAAZ,UAAc,SAA4C;QACtD;;WAEG;QACH,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;YAC1C,MAAM,IAAI,KAAK,CACX,qEAAuE,CAC1E,CAAC;SACL;QAED,IACI,OAAO,SAAS,CAAC,MAAM,CAAC,IAAI,KAAK,QAAQ;YACzC,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,EACvC;YACE,MAAM,IAAI,KAAK,CACX,sFAAoF,CACvF,CAAC;SACL;QAED,IAAM,KAAK,GAAI,EAAe,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAE7D,IAAI,KAAK,GAAG,IAAI,CAAC;QAEjB;;WAEG;QACH,KAAqB,UAAqC,EAArC,KAAA,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAArC,cAAqC,EAArC,IAAqC,EAAE;YAAvD,IAAM,MAAM,SAAA;YACb,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;gBAChD;;mBAEG;gBACH,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;oBACzD,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;iBAChD;gBAED;;mBAEG;gBACH,IACI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC,SAAS,CAAC,EAC9D;oBACE,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBAC3D;gBAED,KAAK,GAAG,KAAK,CAAC;aACjB;SACJ;QAED,IAAI,CAAC,KAAK,EAAE;YACR,OAAO,KAAK,CAAC;SAChB;QAED;;UAEE;QACF,KAAsB,UAAsC,EAAtC,KAAA,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAtC,cAAsC,EAAtC,IAAsC,EAAE;YAAzD,IAAM,OAAO,SAAA;YACd,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;gBAClD;;kBAEE;gBACF,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;oBAC3D,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;iBAClD;gBAED;;kBAEE;gBACF,IACI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,QAAQ,CAC/C,SAAS,CACZ,EACH;oBACE,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;iBAC7D;gBAED,KAAK,GAAG,KAAK,CAAC;aACjB;SACJ;QAED,IAAI,CAAC,KAAK,EAAE;YACR,OAAO,KAAK,CAAC;SAChB;QAED;;WAEG;QACH,KAAqB,UAAqC,EAArC,KAAA,SAAS,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAArC,cAAqC,EAArC,IAAqC,EAAE;YAAvD,IAAM,MAAM,SAAA;YACb,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;YAE3D;;eAEG;YACH,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBACzC,IAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,CACzD,SAAS,CACZ,CAAC;gBACF,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;oBACd,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;iBAC5D;aACJ;SACJ;QAED;;YAEI;QACJ,KAAsB,UAA+C,EAA/C,KAAC,SAAiB,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,EAA/C,cAA+C,EAA/C,IAA+C,EAAE;YAAlE,IAAM,OAAO,SAAA;YACd,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YAE/D;;eAEG;YACH,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;gBAC3C,IAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,CAC3D,SAAS,CACZ,CAAC;gBACF,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;oBACd,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;iBAC9D;aACJ;SACJ;QAED;;WAEG;QACH,KAAmB,UAAK,EAAL,eAAK,EAAL,mBAAK,EAAL,IAAK,EAAE;YAArB,IAAM,IAAI,cAAA;YACX;;eAEG;YACH,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC;YAE9C;;eAEG;YACH,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;gBACjD,IAAI,CAAC,UAAU,CAAC,SAAS,CACrB,IAAI,CACP,GAAG,EAAyC,CAAC;aACjD;YAED;;eAEG;YACH,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;SACnD;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,2BAAS,GAAT,UAAW,MAAsC;QAC7C;;WAEG;QACH,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;YACvC,MAAM,IAAI,KAAK,CACX,kEAAoE,CACvE,CAAC;SACL;QAED,IACI,OAAO,MAAM,CAAC,MAAM,CAAC,IAAI,KAAK,QAAQ;YACtC,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,EACpC;YACE,MAAM,IAAI,KAAK,CACX,mFAAiF,CACpF,CAAC;SACL;QAED,IAAM,KAAK,GAAI,EAAe,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAE1D;;WAEG;QACH,KAAmB,UAAK,EAAL,eAAK,EAAL,mBAAK,EAAL,IAAK,EAAE;YAArB,IAAM,IAAI,cAAA;YACX,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;gBACf,MAAM,IAAI,KAAK,CACX,kFAA+E,IAAI,OAAG,CACzF,CAAC;aACL;YAED,IAAI,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,UAAU,EAAE;gBACpC,MAAM,IAAI,KAAK,CACX,uBAAsB,IAAI,yBAAuB,CACpD,CAAC;aACL;SACJ;QAED,IAAI,KAAK,GAAG,IAAI,CAAC;QAEjB;;WAEG;QACH,KAAmB,UAAkC,EAAlC,KAAA,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAAlC,cAAkC,EAAlC,IAAkC,EAAE;YAAlD,IAAM,IAAI,SAAA;YACX,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;gBAC9C;;mBAEG;gBACH,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;oBACpD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;iBAC3C;gBAED;;mBAEG;gBACH,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;oBACtD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBACnD;gBAED,KAAK,GAAG,KAAK,CAAC;aACjB;SACJ;QAED,IAAI,CAAC,KAAK,EAAE;YACR,OAAO,KAAK,CAAC;SAChB;QAED;;WAEG;QACH,KAAsB,UAAmC,EAAnC,KAAA,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAnC,cAAmC,EAAnC,IAAmC,EAAE;YAAtD,IAAM,OAAO,SAAA;YACd,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;gBAClD;;mBAEG;gBACH,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;oBACxD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;iBAC/C;gBAED;;mBAEG;gBACH,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;oBAC1D,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;iBACvD;gBAED,KAAK,GAAG,KAAK,CAAC;aACjB;SACJ;QAED,IAAI,CAAC,KAAK,EAAE;YACR,OAAO,KAAK,CAAC;SAChB;QAED;;WAEG;QACH,KAAmB,UAAkC,EAAlC,KAAA,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAAlC,cAAkC,EAAlC,IAAkC,EAAE;YAAlD,IAAM,IAAI,SAAA;YACX,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAEpD;;eAEG;YACH,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBACpC,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,OAAO,CACpD,MAAM,CACT,CAAC;gBACF,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;oBACd,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;iBACvD;aACJ;SACJ;QAED;;YAEI;QACJ,KAAsB,UAAmC,EAAnC,KAAA,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAnC,cAAmC,EAAnC,IAAmC,EAAE;YAAtD,IAAM,OAAO,SAAA;YACd,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YAE5D;;eAEG;YACH,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;gBACxC,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,CACxD,MAAM,CACT,CAAC;gBACF,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;oBACd,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;iBAC3D;aACJ;SACJ;QAED;;WAEG;QACH,KAAmB,UAAK,EAAL,eAAK,EAAL,mBAAK,EAAL,IAAK,EAAE;YAArB,IAAM,IAAI,cAAA;YACX;;eAEG;YACH,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;gBAC7C,MAAM,IAAI,KAAK,CACX,6BAA0B,IAAI,0BAAsB,CACvD,CAAC;aACL;YAED,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC;YAEtC;;eAEG;YACH,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;gBACtD,KAAmB,UAAqC,EAArC,KAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAArC,cAAqC,EAArC,IAAqC,EAAE;oBAArD,IAAM,IAAI,SAAA;oBACX,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;iBAC3B;aACJ;YAED,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;gBACpD,KAAmB,UAAmC,EAAnC,KAAA,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAnC,cAAmC,EAAnC,IAAmC,EAAE;oBAAnD,IAAM,IAAI,SAAA;oBACX,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;iBACzB;aACJ;YAED,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;gBACnD,KAAmB,UAAkC,EAAlC,KAAA,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAlC,cAAkC,EAAlC,IAAkC,EAAE;oBAAlD,IAAM,IAAI,SAAA;oBACX,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;iBACxB;aACJ;YAED,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;gBACtD,KAAmB,UAAqC,EAArC,KAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAArC,cAAqC,EAArC,IAAqC,EAAE;oBAArD,IAAM,IAAI,SAAA;oBACX,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;iBAC5B;aACJ;SACJ;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,4BAAU,GAAV,UAAY,OAAwC;QAChD;;WAEG;QACH,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;YACxC,MAAM,IAAI,KAAK,CACX,mEAAqE,CACxE,CAAC;SACL;QAED,IAAI,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;YACzC,2CAA2C;YAC3C,MAAM,IAAI,KAAK,CACX,yEAAuE,OAAO,OAAO;iBAChF,MAAM,CAAC,IAAM,CACrB,CAAC;SACL;QAED,IAAI,KAAK,GAAG,IAAI,CAAC;QAEjB;;WAEG;QACH,KAAmB,UAAmC,EAAnC,KAAA,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAAnC,cAAmC,EAAnC,IAAmC,EAAE;YAAnD,IAAM,IAAI,SAAA;YACX,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;gBAC9C;;mBAEG;gBACH,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;oBACrD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;iBAC5C;gBAED;;mBAEG;gBACH,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;oBACxD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBACrD;gBAED,KAAK,GAAG,KAAK,CAAC;aACjB;SACJ;QAED,IAAI,CAAC,KAAK,EAAE;YACR,OAAO,KAAK,CAAC;SAChB;QAED;;WAEG;QACH,KAAmB,UAAoC,EAApC,KAAA,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,EAApC,cAAoC,EAApC,IAAoC,EAAE;YAApD,IAAM,IAAI,SAAA;YACX,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;gBAC/C;;mBAEG;gBACH,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;oBACtD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;iBAC7C;gBAED;;mBAEG;gBACH,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;oBACzD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;iBACtD;gBAED,KAAK,GAAG,KAAK,CAAC;aACjB;SACJ;QAED,IAAI,CAAC,KAAK,EAAE;YACR,OAAO,KAAK,CAAC;SAChB;QAED;;WAEG;QACH,KAAmB,UAAmC,EAAnC,KAAA,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAAnC,cAAmC,EAAnC,IAAmC,EAAE;YAAnD,IAAM,IAAI,SAAA;YACX,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAErD;;eAEG;YACH,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;gBACrC,IAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,OAAO,CACrD,OAAO,CACV,CAAC;gBACF,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;oBACd,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;iBACxD;aACJ;SACJ;QAED;;WAEG;QACH,KAAmB,UAAoC,EAApC,KAAA,OAAO,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,EAApC,cAAoC,EAApC,IAAoC,EAAE;YAApD,IAAM,IAAI,SAAA;YACX,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAEvD,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;gBACtC,IAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,OAAO,CACtD,OAAO,CACV,CAAC;gBACF,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;oBACd,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;iBACzD;aACJ;SACJ;QAED;;WAEG;QACH,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;YAC7D,MAAM,IAAI,KAAK,CACX,8BAA2B,OAAO,CAAC,MAAM;iBACpC,IAAI,0BAAsB,CAClC,CAAC;SACL;QAED,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC;QAEvD;;WAEG;QACH,IACI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EACtE;YACE,KAAmB,UAElB,EAFkB,KAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAC/C,OAAO,CAAC,MAAM,CAAC,IAAI,CACtB,EAFkB,cAElB,EAFkB,IAElB,EAAE;gBAFE,IAAM,IAAI,SAAA;gBAGX,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;aAC3B;SACJ;QAED,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;YACnE,KAAmB,UAElB,EAFkB,KAAA,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,QAAQ,CAC5C,OAAO,CAAC,MAAM,CAAC,IAAI,CACtB,EAFkB,cAElB,EAFkB,IAElB,EAAE;gBAFE,IAAM,IAAI,SAAA;gBAGX,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;aACxB;SACJ;QAED,IACI,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EACpE;YACE,KAAmB,UAElB,EAFkB,KAAA,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,CAC7C,OAAO,CAAC,MAAM,CAAC,IAAI,CACtB,EAFkB,cAElB,EAFkB,IAElB,EAAE;gBAFE,IAAM,IAAI,SAAA;gBAGX,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;aACzB;SACJ;QAED,IACI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EACtE;YACE,KAAmB,UAElB,EAFkB,KAAA,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAC/C,OAAO,CAAC,MAAM,CAAC,IAAI,CACtB,EAFkB,cAElB,EAFkB,IAElB,EAAE;gBAFE,IAAM,IAAI,SAAA;gBAGX,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;aAC5B;SACJ;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,+BAAa,GAAb,UAAe,UAA8C;QACzD;;WAEG;QACH,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;YAC3C,MAAM,IAAI,KAAK,CACX,kEAAoE,CACvE,CAAC;SACL;QAED,IACI,OAAO,UAAU,CAAC,MAAM,CAAC,IAAI,KAAK,QAAQ;YAC1C,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,EACxC;YACE,MAAM,IAAI,KAAK,CACX,uFAAqF,CACxF,CAAC;SACL;QAED,IAAM,KAAK,GAAI,EAAe,CAAC,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAE9D,IAAI,KAAK,GAAG,IAAI,CAAC;QAEjB;;WAEG;QACH,KAAqB,UAAsC,EAAtC,KAAA,UAAU,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAAtC,cAAsC,EAAtC,IAAsC,EAAE;YAAxD,IAAM,MAAM,SAAA;YACb,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;gBAChD;;mBAEG;gBACH,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;oBACzD,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;iBAChD;gBAED;;mBAEG;gBACH,IACI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,QAAQ,CAC7C,UAAU,CACb,EACH;oBACE,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;iBAC5D;gBAED,KAAK,GAAG,KAAK,CAAC;aACjB;SACJ;QAED,IAAI,CAAC,KAAK,EAAE;YACR,OAAO,KAAK,CAAC;SAChB;QAED;;WAEG;QACH,KAAsB,UAAuC,EAAvC,KAAA,UAAU,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAvC,cAAuC,EAAvC,IAAuC,EAAE;YAA1D,IAAM,OAAO,SAAA;YACd,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;gBAClD;;mBAEG;gBACH,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;oBAC3D,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;iBAClD;gBAED;;mBAEG;gBACH,IACI,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,QAAQ,CAC/C,UAAU,CACb,EACH;oBACE,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;iBAC9D;gBAED,KAAK,GAAG,KAAK,CAAC;aACjB;SACJ;QAED,IAAI,CAAC,KAAK,EAAE;YACR,OAAO,KAAK,CAAC;SAChB;QAED;;WAEG;QACH,KAAqB,UAAsC,EAAtC,KAAA,UAAU,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAAtC,cAAsC,EAAtC,IAAsC,EAAE;YAAxD,IAAM,MAAM,SAAA;YACb,UAAU,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;YAE5D;;eAEG;YACH,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBACzC,IAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,OAAO,CACzD,UAAU,CACb,CAAC;gBACF,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;oBACd,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;iBAC5D;aACJ;SACJ;QAED;;WAEG;QACH,KAAsB,UAAuC,EAAvC,KAAA,UAAU,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAvC,cAAuC,EAAvC,IAAuC,EAAE;YAA1D,IAAM,OAAO,SAAA;YACd,UAAU,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YAEhE;;eAEG;YACH,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE;gBAC3C,IAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,CAC3D,UAAU,CACb,CAAC;gBACF,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;oBACd,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;iBAC9D;aACJ;SACJ;QAED;;WAEG;QACH,KAAmB,UAAK,EAAL,eAAK,EAAL,mBAAK,EAAL,IAAK,EAAE;YAArB,IAAM,IAAI,cAAA;YACX;;eAEG;YACH,IAAM,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YAC1C,IAAI,IAAI,CAAC,UAAU,IAAI,OAAO,IAAI,CAAC,UAAU,KAAK,UAAU,EAAE;gBAC1D,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;aAC/B;YAED;;eAEG;YACH,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE;gBACjD,IAAI,CAAC,UAAU,CAAC,SAAS,CACrB,IAAI,CACP,GAAG,EAA0C,CAAC;aAClD;YAED;;eAEG;YACH,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SACpD;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IAEO,oCAAkB,GAA1B,UACI,IAA8B;QAE9B,IAAI,OAAO,IAAI,KAAK,UAAU,EAAE;YAC5B,OAAO,IAAK,IAAY,EAAE,CAAC;SAC9B;aAAM;YACH,OAAO,IAAW,CAAC;SACtB;IACL,CAAC;IAEO,gDAA8B,GAAtC,UACI,QAA0B,EAC1B,SAA0B;QAA1B,0BAAA,EAAA,iBAA0B;QAE1B,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,EAAE;YAC/B,QAAQ,CAAC,MAAM,CAAC,YAAY,GAAG,EAAE,CAAC;SACrC;QAED,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,EAAE;YACvC,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,GAAG,EAAE,CAAC;SAC7C;QAED,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAE;YACxC,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,GAAG,EAAE,CAAC;SAC9C;QAEA,QAAgB,CAAC,OAAO,GAAG,EAAE,CAAC;QAC9B,QAAgB,CAAC,QAAQ,GAAG,EAAE,CAAC;QAEhC,IAAI,SAAS,EAAE;YACX,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,GAAG,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,CAC9E,QAAQ,CAAC,MAAM,CAAC,IAAI,CACvB,CAAC;SACL;IACL,CAAC;IACL,cAAC;AAAD,CAAC,AAtyBD,IAsyBC;AAtyBY,0BAAO","sourcesContent":["import { PluginInstanceWithDependencies } from '../plugin';\nimport { ServiceInstanceWithDependencies } from '../service';\nimport { ComponentInstanceWithDependencies } from '../component';\nimport { MiddlewareInstanceWithDependencies } from '../middleware';\n\nimport { LeverageUnit, LeverageInstance, EmptyUnit } from '..';\n\nexport interface LeverageManager {\n    add: (...units: LeverageUnit[]) => void;\n\n    // @ts-ignore\n    addPlugin: (plugin: PluginInstanceWithDependencies) => boolean;\n    // @ts-ignore\n    addService: (service: ServiceInstanceWithDependencies) => boolean;\n    // @ts-ignore\n    addComponent: (component: ComponentInstanceWithDependencies) => boolean;\n    // @ts-ignore\n    addMiddleware: (middleware: MiddlewareInstanceWithDependencies) => boolean;\n}\n\nexport interface UnitMap<T> {\n    waiting: {\n        plugins: {\n            [type: string]: T[];\n        };\n        services: {\n            [name: string]: T[];\n        };\n    };\n\n    installed: {\n        [key: string]: T;\n    };\n}\n\nexport interface ComponentUnitMap {\n    waiting: {\n        plugins: {\n            [type: string]: ComponentInstanceWithDependencies[];\n        };\n        services: {\n            [name: string]: ComponentInstanceWithDependencies[];\n        };\n    };\n\n    installed: {\n        [key: string]: ComponentInstanceWithDependencies[];\n    };\n}\n\nexport interface MiddlewareUnitMap {\n    waiting: {\n        plugins: {\n            [type: string]: MiddlewareInstanceWithDependencies[];\n        };\n        services: {\n            [name: string]: MiddlewareInstanceWithDependencies[];\n        };\n    };\n\n    installed: {\n        [key: string]: MiddlewareInstanceWithDependencies[];\n    };\n}\n\nexport class Manager implements LeverageManager {\n    private plugins: UnitMap<PluginInstanceWithDependencies>;\n    private services: UnitMap<ServiceInstanceWithDependencies>;\n    private middleware: MiddlewareUnitMap;\n    private components: ComponentUnitMap;\n\n    constructor () {\n        this.plugins = {\n            waiting: {\n                plugins: {},\n                services: {},\n            },\n            installed: {},\n        };\n\n        this.services = {\n            waiting: {\n                plugins: {},\n                services: {},\n            },\n            installed: {},\n        };\n\n        this.components = {\n            waiting: {\n                plugins: {},\n                services: {},\n            },\n            installed: {},\n        };\n\n        this.middleware = {\n            waiting: {\n                plugins: {},\n                services: {},\n            },\n            installed: {},\n        };\n    }\n\n    add (...units: Array<LeverageUnit | EmptyUnit>) {\n        for (const unit of units) {\n            /*\n             * Only accept objects or functions\n             */\n            if (typeof unit !== 'object' && typeof unit !== 'function') {\n                throw new Error(\n                    `[Manager] A Leverage unit must be either an object or constructor function`,\n                );\n            }\n\n            /*\n             * Support constructor functions\n             */\n            const instance = this.createUnitInstance(unit);\n\n            /*\n             * Ensure the instance has an `is` property\n             */\n            if (!instance.is) {\n                throw new Error(\n                    `[Manager] A Leverage unit must have an \\`is\\` property`,\n                );\n            }\n\n            /*\n             * Verify the validity of the config\n             */\n            if (typeof instance.config !== 'object') {\n                // tslint:disable-next-line:max-line-length\n                throw new Error(\n                    `[Manager] Expected config property to be an \"object\" but got \"${typeof instance.config}\"`,\n                );\n            }\n\n            if (typeof instance.is !== 'string') {\n                // tslint:disable-next-line:max-line-length\n                throw new Error(\n                    `[Manager] Expected \\`config.is\\` to be a \"string\" but got a \"${typeof instance.is}\"`,\n                );\n            }\n\n            /*\n             * Normalize the dependency map\n             */\n            if (instance.is === 'component' || instance.is === 'middleware') {\n                this.initializeInstanceDependencies(instance, true);\n            } else {\n                this.initializeInstanceDependencies(instance);\n            }\n\n            /*\n             * Begin install process\n             */\n            switch (instance.is) {\n                case 'plugin':\n                    this.addPlugin(instance as PluginInstanceWithDependencies);\n                    break;\n\n                case 'service':\n                    this.addService(\n                        instance as ServiceInstanceWithDependencies,\n                    );\n                    break;\n\n                case 'component':\n                    this.addComponent(\n                        instance as ComponentInstanceWithDependencies,\n                    );\n                    break;\n\n                case 'middleware':\n                    this.addMiddleware(\n                        instance as MiddlewareInstanceWithDependencies,\n                    );\n                    break;\n\n                default:\n                    // tslint:disable-next-line:max-line-length\n                    throw new Error(\n                        `[Manager] Leverage unit kind \"${instance.config\n                            .is}\" is not valid; supported values are: \"plugin\", \"service\", \"component\", \"middleware\"`,\n                    );\n            }\n        }\n    }\n\n    addComponent (component: ComponentInstanceWithDependencies): boolean {\n        /*\n         * Verify validity of the component\n         */\n        if (!component.config.hasOwnProperty('type')) {\n            throw new Error(\n                `[Manager] A Leverage component's config must have a \\`type\\` property`,\n            );\n        }\n\n        if (\n            typeof component.config.type !== 'string' &&\n            !Array.isArray(component.config.type)\n        ) {\n            throw new Error(\n                `[Manager] Expected \\`component.config.type\\` to be a \"string\" or array of \"string\"`,\n            );\n        }\n\n        const types = ([] as string[]).concat(component.config.type);\n\n        let ready = true;\n\n        /*\n         * Check to see if all required plugins are available\n         */\n        for (const plugin of component.config.dependencies.plugins) {\n            if (!this.plugins.installed.hasOwnProperty(plugin)) {\n                /*\n                 * Create waiting array if it doesn't exist for this type\n                 */\n                if (!this.components.waiting.plugins.hasOwnProperty(plugin)) {\n                    this.components.waiting.plugins[plugin] = [];\n                }\n\n                /*\n                 * Push the component to the waiting array if it isn't already\n                 */\n                if (\n                    !this.components.waiting.plugins[plugin].includes(component)\n                ) {\n                    this.components.waiting.plugins[plugin].push(component);\n                }\n\n                ready = false;\n            }\n        }\n\n        if (!ready) {\n            return false;\n        }\n\n        /*\n        * Check to see if all required services are available\n        */\n        for (const service of component.config.dependencies.services) {\n            if (!this.services.installed.hasOwnProperty(service)) {\n                /*\n                * Create waiting array if it doesn't exist for this type\n                */\n                if (!this.components.waiting.services.hasOwnProperty(service)) {\n                    this.components.waiting.services[service] = [];\n                }\n\n                /*\n                * Push the component to the waiting array if it isn't already\n                */\n                if (\n                    !this.components.waiting.services[service].includes(\n                        component,\n                    )\n                ) {\n                    this.components.waiting.services[service].push(component);\n                }\n\n                ready = false;\n            }\n        }\n\n        if (!ready) {\n            return false;\n        }\n\n        /*\n         * Inject plugins\n         */\n        for (const plugin of component.config.dependencies.plugins) {\n            component.plugins[plugin] = this.plugins.installed[plugin];\n\n            /*\n             * Remove the component from the waiting array if it exists\n             */\n            if (this.components.waiting.plugins[plugin]) {\n                const index = this.components.waiting.plugins[plugin].indexOf(\n                    component,\n                );\n                if (index !== -1) {\n                    this.components.waiting.plugins[plugin].splice(index, 1);\n                }\n            }\n        }\n\n        /*\n          * Inject services\n          */\n        for (const service of (component as any).config.dependencies.services) {\n            component.services[service] = this.services.installed[service];\n\n            /*\n             * Remove the component from the waiting array if it exists\n             */\n            if (this.components.waiting.services[service]) {\n                const index = this.components.waiting.services[service].indexOf(\n                    component,\n                );\n                if (index !== -1) {\n                    this.components.waiting.services[service].splice(index, 1);\n                }\n            }\n        }\n\n        /*\n         * Install\n         */\n        for (const type of types) {\n            /*\n             * Install the component\n             */\n            this.plugins.installed[type][type](component);\n\n            /*\n             * Create the component array if it doesn't exist for this type\n             */\n            if (!this.components.installed.hasOwnProperty(type)) {\n                this.components.installed[\n                    type\n                ] = [] as ComponentInstanceWithDependencies[];\n            }\n\n            /*\n             * Push the component to the component array\n             */\n            this.components.installed[type].push(component);\n        }\n\n        return true;\n    }\n\n    addPlugin (plugin: PluginInstanceWithDependencies): boolean {\n        /*\n         * Verify validity of the plugin\n         */\n        if (!plugin.config.hasOwnProperty('type')) {\n            throw new Error(\n                `[Manager] A Leverage plugin's config must have a \\`type\\` property`,\n            );\n        }\n\n        if (\n            typeof plugin.config.type !== 'string' &&\n            !Array.isArray(plugin.config.type)\n        ) {\n            throw new Error(\n                `[Manager] Expected \\`plugin.config.type\\` to be a \"string\" or array of \"string\"`,\n            );\n        }\n\n        const types = ([] as string[]).concat(plugin.config.type);\n\n        /*\n         * Ensure the plugin conforms to the plugin interface\n         */\n        for (const type of types) {\n            if (!plugin[type]) {\n                throw new Error(\n                    `[Manager] Plugins must have methods that match their types, missing method \"${type}\"`,\n                );\n            }\n\n            if (typeof plugin[type] !== 'function') {\n                throw new Error(\n                    `[Manager] \\`plugin.${type}\\` must be a function`,\n                );\n            }\n        }\n\n        let ready = true;\n\n        /*\n         * Check to see if all required plugins are available\n         */\n        for (const type of plugin.config.dependencies.plugins) {\n            if (!this.plugins.installed.hasOwnProperty(type)) {\n                /*\n                 * Create waiting array if it doesn't exist for this type\n                 */\n                if (!this.plugins.waiting.plugins.hasOwnProperty(type)) {\n                    this.plugins.waiting.plugins[type] = [];\n                }\n\n                /*\n                 * Push the plugin to the waiting array if it isn't already\n                 */\n                if (!this.plugins.waiting.plugins[type].includes(plugin)) {\n                    this.plugins.waiting.plugins[type].push(plugin);\n                }\n\n                ready = false;\n            }\n        }\n\n        if (!ready) {\n            return false;\n        }\n\n        /*\n         * Check to see if all required services are available\n         */\n        for (const service of plugin.config.dependencies.services) {\n            if (!this.services.installed.hasOwnProperty(service)) {\n                /*\n                 * Create waiting array if it doesn't exist for this type\n                 */\n                if (!this.plugins.waiting.services.hasOwnProperty(service)) {\n                    this.plugins.waiting.services[service] = [];\n                }\n\n                /*\n                 * Push the component to the waiting array if it isn't already\n                 */\n                if (!this.plugins.waiting.services[service].includes(plugin)) {\n                    this.plugins.waiting.services[service].push(plugin);\n                }\n\n                ready = false;\n            }\n        }\n\n        if (!ready) {\n            return false;\n        }\n\n        /*\n         * Inject plugins\n         */\n        for (const type of plugin.config.dependencies.plugins) {\n            plugin.plugins[type] = this.plugins.installed[type];\n\n            /*\n             * Remove the plugin from the waiting array if it exists\n             */\n            if (this.plugins.waiting.plugins[type]) {\n                const index = this.plugins.waiting.plugins[type].indexOf(\n                    plugin,\n                );\n                if (index !== -1) {\n                    this.plugins.waiting.plugins[type].splice(index, 1);\n                }\n            }\n        }\n\n        /*\n          * Inject services\n          */\n        for (const service of plugin.config.dependencies.services) {\n            plugin.services[service] = this.services.installed[service];\n\n            /*\n             * Remove the plugin from the waiting array if it exists\n             */\n            if (this.plugins.waiting.services[service]) {\n                const index = this.plugins.waiting.services[service].indexOf(\n                    plugin,\n                );\n                if (index !== -1) {\n                    this.plugins.waiting.services[service].splice(index, 1);\n                }\n            }\n        }\n\n        /*\n         * Start installing the plugin for each type it supports\n         */\n        for (const type of types) {\n            /*\n             * Ensure the plugin type doesn't already exist\n             */\n            if (this.plugins.installed.hasOwnProperty(type)) {\n                throw new Error(\n                    `[Manager] Plugin type \"${type}\" is already defined`,\n                );\n            }\n\n            this.plugins.installed[type] = plugin;\n\n            /*\n             * Attempt to install anything waiting on this plugin\n             */\n            if (this.components.waiting.plugins.hasOwnProperty(type)) {\n                for (const unit of this.components.waiting.plugins[type]) {\n                    this.addComponent(unit);\n                }\n            }\n\n            if (this.services.waiting.plugins.hasOwnProperty(type)) {\n                for (const unit of this.services.waiting.plugins[type]) {\n                    this.addService(unit);\n                }\n            }\n\n            if (this.plugins.waiting.plugins.hasOwnProperty(type)) {\n                for (const unit of this.plugins.waiting.plugins[type]) {\n                    this.addPlugin(unit);\n                }\n            }\n\n            if (this.middleware.waiting.plugins.hasOwnProperty(type)) {\n                for (const unit of this.middleware.waiting.plugins[type]) {\n                    this.addMiddleware(unit);\n                }\n            }\n        }\n\n        return true;\n    }\n\n    addService (service: ServiceInstanceWithDependencies) {\n        /*\n         * Verify validity of the service\n         */\n        if (!service.config.hasOwnProperty('name')) {\n            throw new Error(\n                `[Manager] A Leverage service's config must have a \\`name\\` property`,\n            );\n        }\n\n        if (typeof service.config.name !== 'string') {\n            // tslint:disable-next-line:max-line-length\n            throw new Error(\n                `[Manager] Expected \\`service.config.name\\` to be a \"string\" but got ${typeof service\n                    .config.name}`,\n            );\n        }\n\n        let ready = true;\n\n        /*\n         * Check to see if all required plugins are available\n         */\n        for (const type of service.config.dependencies.plugins) {\n            if (!this.plugins.installed.hasOwnProperty(type)) {\n                /*\n                 * Create waiting array if it doesn't exist for this plugin\n                 */\n                if (!this.services.waiting.plugins.hasOwnProperty(type)) {\n                    this.services.waiting.plugins[type] = [];\n                }\n\n                /*\n                 * Push the service to the waiting array if it isn't already\n                 */\n                if (!this.services.waiting.plugins[type].includes(service)) {\n                    this.services.waiting.plugins[type].push(service);\n                }\n\n                ready = false;\n            }\n        }\n\n        if (!ready) {\n            return false;\n        }\n\n        /*\n         * Check to see if all required services are available\n         */\n        for (const name of service.config.dependencies.services) {\n            if (!this.services.installed.hasOwnProperty(name)) {\n                /*\n                 * Create waiting array if it doesn't exist for this service\n                 */\n                if (!this.services.waiting.services.hasOwnProperty(name)) {\n                    this.services.waiting.services[name] = [];\n                }\n\n                /*\n                 * Push the service to the waiting array if it isn't already\n                 */\n                if (!this.services.waiting.services[name].includes(service)) {\n                    this.services.waiting.services[name].push(service);\n                }\n\n                ready = false;\n            }\n        }\n\n        if (!ready) {\n            return false;\n        }\n\n        /*\n         * Inject plugins\n         */\n        for (const type of service.config.dependencies.plugins) {\n            service.plugins[type] = this.plugins.installed[type];\n\n            /*\n             * Remove the service from the waiting array if it exists\n             */\n            if (this.services.waiting.plugins[type]) {\n                const index = this.services.waiting.plugins[type].indexOf(\n                    service,\n                );\n                if (index !== -1) {\n                    this.services.waiting.plugins[type].splice(index, 1);\n                }\n            }\n        }\n\n        /*\n         * Inject services\n         */\n        for (const name of service.config.dependencies.services) {\n            service.services[name] = this.services.installed[name];\n\n            if (this.services.waiting.services[name]) {\n                const index = this.services.waiting.services[name].indexOf(\n                    service,\n                );\n                if (index !== -1) {\n                    this.services.waiting.services[name].splice(index, 1);\n                }\n            }\n        }\n\n        /*\n         * Start installing the service\n         */\n        if (this.services.installed.hasOwnProperty(service.config.name)) {\n            throw new Error(\n                `[Manager] Service name \"${service.config\n                    .name}\" is already defined`,\n            );\n        }\n\n        this.services.installed[service.config.name] = service;\n\n        /*\n         * Attempt to intsall anything waiting on this service\n         */\n        if (\n            this.components.waiting.services.hasOwnProperty(service.config.name)\n        ) {\n            for (const unit of this.components.waiting.services[\n                service.config.name\n            ]) {\n                this.addComponent(unit);\n            }\n        }\n\n        if (this.plugins.waiting.services.hasOwnProperty(service.config.name)) {\n            for (const unit of this.plugins.waiting.services[\n                service.config.name\n            ]) {\n                this.addPlugin(unit);\n            }\n        }\n\n        if (\n            this.services.waiting.services.hasOwnProperty(service.config.name)\n        ) {\n            for (const unit of this.services.waiting.services[\n                service.config.name\n            ]) {\n                this.addService(unit);\n            }\n        }\n\n        if (\n            this.middleware.waiting.services.hasOwnProperty(service.config.name)\n        ) {\n            for (const unit of this.middleware.waiting.services[\n                service.config.name\n            ]) {\n                this.addMiddleware(unit);\n            }\n        }\n\n        return true;\n    }\n\n    addMiddleware (middleware: MiddlewareInstanceWithDependencies): boolean {\n        /*\n         * Verify validity of the middleware\n         */\n        if (!middleware.config.hasOwnProperty('type')) {\n            throw new Error(\n                `[Manager] A Leverage plugin's config must have a \\`type\\` property`,\n            );\n        }\n\n        if (\n            typeof middleware.config.type !== 'string' &&\n            !Array.isArray(middleware.config.type)\n        ) {\n            throw new Error(\n                `[Manager] Expected \\`middleware.config.type\\` to be a \"string\" or array of \"string\"`,\n            );\n        }\n\n        const types = ([] as string[]).concat(middleware.config.type);\n\n        let ready = true;\n\n        /*\n         * Check to see if all required plugins are available\n         */\n        for (const plugin of middleware.config.dependencies.plugins) {\n            if (!this.plugins.installed.hasOwnProperty(plugin)) {\n                /*\n                 * Create waiting array if it doesn't exist for this type\n                 */\n                if (!this.middleware.waiting.plugins.hasOwnProperty(plugin)) {\n                    this.middleware.waiting.plugins[plugin] = [];\n                }\n\n                /*\n                 * Push the middleware to the waiting array if it isn't already\n                 */\n                if (\n                    !this.middleware.waiting.plugins[plugin].includes(\n                        middleware,\n                    )\n                ) {\n                    this.middleware.waiting.plugins[plugin].push(middleware);\n                }\n\n                ready = false;\n            }\n        }\n\n        if (!ready) {\n            return false;\n        }\n\n        /*\n         * Check to see if all required services are available\n         */\n        for (const service of middleware.config.dependencies.services) {\n            if (!this.services.installed.hasOwnProperty(service)) {\n                /*\n                 * Create waiting array if it doesn't exist for this service\n                 */\n                if (!this.middleware.waiting.services.hasOwnProperty(service)) {\n                    this.middleware.waiting.services[service] = [];\n                }\n\n                /*\n                 * Push the middleware to the waiting array if it isn't already\n                 */\n                if (\n                    !this.middleware.waiting.services[service].includes(\n                        middleware,\n                    )\n                ) {\n                    this.middleware.waiting.services[service].push(middleware);\n                }\n\n                ready = false;\n            }\n        }\n\n        if (!ready) {\n            return false;\n        }\n\n        /*\n         * Inject plugins\n         */\n        for (const plugin of middleware.config.dependencies.plugins) {\n            middleware.plugins[plugin] = this.plugins.installed[plugin];\n\n            /*\n             * Remove the middleware from the waiting array if it exists\n             */\n            if (this.middleware.waiting.plugins[plugin]) {\n                const index = this.middleware.waiting.plugins[plugin].indexOf(\n                    middleware,\n                );\n                if (index !== -1) {\n                    this.middleware.waiting.plugins[plugin].splice(index, 1);\n                }\n            }\n        }\n\n        /*\n         * Inject services\n         */\n        for (const service of middleware.config.dependencies.services) {\n            middleware.services[service] = this.services.installed[service];\n\n            /*\n             * Remove the middleware from the waiting array if it exists\n             */\n            if (this.middleware.waiting.services[service]) {\n                const index = this.middleware.waiting.services[service].indexOf(\n                    middleware,\n                );\n                if (index !== -1) {\n                    this.middleware.waiting.services[service].splice(index, 1);\n                }\n            }\n        }\n\n        /*\n         * Start installing the middleware for each type it supports\n         */\n        for (const type of types) {\n            /*\n             * Install the middleware\n             */\n            const unit = this.plugins.installed[type];\n            if (unit.middleware && typeof unit.middleware === 'function') {\n                unit.middleware(middleware);\n            }\n\n            /*\n             * Create the middleware array if it doesn't exist\n             */\n            if (!this.middleware.installed.hasOwnProperty(type)) {\n                this.middleware.installed[\n                    type\n                ] = [] as MiddlewareInstanceWithDependencies[];\n            }\n\n            /*\n             * Push the middleware to the middleware array\n             */\n            this.middleware.installed[type].push(middleware);\n        }\n\n        return true;\n    }\n\n    private createUnitInstance (\n        unit: LeverageUnit | EmptyUnit,\n    ): LeverageInstance {\n        if (typeof unit === 'function') {\n            return new (unit as any)();\n        } else {\n            return unit as any;\n        }\n    }\n\n    private initializeInstanceDependencies (\n        instance: LeverageInstance,\n        patchType: boolean = false,\n    ): void {\n        if (!instance.config.dependencies) {\n            instance.config.dependencies = {};\n        }\n\n        if (!instance.config.dependencies.plugins) {\n            instance.config.dependencies.plugins = [];\n        }\n\n        if (!instance.config.dependencies.services) {\n            instance.config.dependencies.services = [];\n        }\n\n        (instance as any).plugins = {};\n        (instance as any).services = {};\n\n        if (patchType) {\n            instance.config.dependencies.plugins = instance.config.dependencies.plugins.concat(\n                instance.config.type,\n            );\n        }\n    }\n}\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"16b156723ab4fb032ec4dc72669f30dbb5e251c5"}
,"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\middleware\\index.ts": {"path":"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\middleware\\index.ts","statementMap":{"0":{"start":{"line":3,"column":4},"end":{"line":3,"column":71}},"1":{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},"2":{"start":{"line":3,"column":53},"end":{"line":3,"column":71}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":34}}},"fnMap":{"0":{"name":"__export","decl":{"start":{"line":2,"column":9},"end":{"line":2,"column":17}},"loc":{"start":{"line":2,"column":21},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},"type":"if","locations":[{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},{"start":{"line":3,"column":21},"end":{"line":3,"column":71}}],"line":3}},"s":{"0":3,"1":3,"2":3,"3":3,"4":3},"f":{"0":3},"b":{"0":[3,0]},"inputSourceMap":{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";;;;;AAAA,kCAA6B","sourcesContent":["export * from './middleware';\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"14f45ca021e46b2305c2c75e6b22f2c499c38966"}
,"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\middleware\\middleware.ts": {"path":"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\middleware\\middleware.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":8,"column":4},"end":{"line":15,"column":5}},"2":{"start":{"line":10,"column":8},"end":{"line":10,"column":31}},"3":{"start":{"line":14,"column":8},"end":{"line":14,"column":20}},"4":{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},"5":{"start":{"line":20,"column":8},"end":{"line":20,"column":33}},"6":{"start":{"line":21,"column":8},"end":{"line":21,"column":43}},"7":{"start":{"line":25,"column":8},"end":{"line":25,"column":20}},"8":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"9":{"start":{"line":31,"column":8},"end":{"line":31,"column":110}},"10":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"11":{"start":{"line":34,"column":8},"end":{"line":34,"column":83}},"12":{"start":{"line":36,"column":4},"end":{"line":40,"column":5}},"13":{"start":{"line":37,"column":8},"end":{"line":39,"column":141}},"14":{"start":{"line":44,"column":15},"end":{"line":44,"column":40}},"15":{"start":{"line":52,"column":8},"end":{"line":52,"column":33}},"16":{"start":{"line":53,"column":8},"end":{"line":53,"column":43}},"17":{"start":{"line":57,"column":8},"end":{"line":57,"column":37}},"18":{"start":{"line":58,"column":8},"end":{"line":58,"column":47}},"19":{"start":{"line":60,"column":4},"end":{"line":60,"column":21}},"20":{"start":{"line":62,"column":0},"end":{"line":62,"column":32}}},"fnMap":{"0":{"name":"Middleware","decl":{"start":{"line":3,"column":9},"end":{"line":3,"column":19}},"loc":{"start":{"line":3,"column":28},"end":{"line":61,"column":1}},"line":3},"1":{"name":"decorator","decl":{"start":{"line":48,"column":13},"end":{"line":48,"column":22}},"loc":{"start":{"line":48,"column":35},"end":{"line":59,"column":5}},"line":48}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":4},"end":{"line":15,"column":5}},"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":15,"column":5}},{"start":{"line":8,"column":4},"end":{"line":15,"column":5}}],"line":8},"1":{"loc":{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},{"start":{"line":19,"column":4},"end":{"line":26,"column":5}}],"line":19},"2":{"loc":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},{"start":{"line":30,"column":4},"end":{"line":32,"column":5}}],"line":30},"3":{"loc":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},{"start":{"line":33,"column":4},"end":{"line":35,"column":5}}],"line":33},"4":{"loc":{"start":{"line":36,"column":4},"end":{"line":40,"column":5}},"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":40,"column":5}},{"start":{"line":36,"column":4},"end":{"line":40,"column":5}}],"line":36},"5":{"loc":{"start":{"line":36,"column":8},"end":{"line":36,"column":70}},"type":"binary-expr","locations":[{"start":{"line":36,"column":8},"end":{"line":36,"column":39}},{"start":{"line":36,"column":43},"end":{"line":36,"column":70}}],"line":36}},"s":{"0":4,"1":10,"2":1,"3":1,"4":9,"5":1,"6":1,"7":1,"8":8,"9":3,"10":5,"11":1,"12":4,"13":2,"14":2,"15":1,"16":1,"17":1,"18":1,"19":2,"20":4},"f":{"0":10,"1":1},"b":{"0":[1,9],"1":[1,8],"2":[3,5],"3":[1,4],"4":[2,2],"5":[4,2]},"inputSourceMap":{"version":3,"file":"middleware.js","sourceRoot":"","sources":["middleware.ts"],"names":[],"mappings":";;AA4CA,oBAA4B,MAAW;IACnC;;OAEG;IACH,aAAa;IACb,IAAI,IAAI,YAAY,UAAU,EAAE;QAC5B,aAAa;QACZ,IAAuB,CAAC,EAAE,GAAG,YAAY,CAAC;QAE3C;;WAEG;QACH,OAAO,IAAW,CAAC;KACtB;IAED;;OAEG;IACH,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE;QAC7B,MAAyB,CAAC,EAAE,GAAG,YAAY,CAAC;QAC5C,MAAc,CAAC,SAAS,CAAC,EAAE,GAAG,YAAY,CAAC;QAE5C;;WAEG;QACH,OAAO,IAAW,CAAC;KACtB;IAED;;OAEG;IACH,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;QAC5B,MAAM,IAAI,KAAK,CACX,gEAA2D,OAAO,MAAM,OAAG,CAC9E,CAAC;KACL;IAED,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;QAChC,MAAM,IAAI,KAAK,CACX,yDAA2D,CAC9D,CAAC;KACL;IAED,IAAI,OAAO,MAAM,CAAC,IAAI,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;QAChE,MAAM,IAAI,KAAK;QACX,2CAA2C;QAC3C,0GAAyG,OAAO,MAAM,CAAC,IAAI,OAAG,CACjI,CAAC;KACL;IAED;;OAEG;IACH,IAAM,IAAI,GAAqB,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;IAEzD;;OAEG;IACH,mBAAoB,UAAsC;QACtD;;WAEG;QACH,UAAU,CAAC,MAAM,GAAG,IAAI,CAAC;QACxB,UAAkB,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;QAE5C;;UAEE;QACF,UAAU,CAAC,EAAE,GAAG,YAAY,CAAC;QAC5B,UAAkB,CAAC,SAAS,CAAC,EAAE,GAAG,YAAY,CAAC;IACpD,CAAC;IAED,OAAO,SAAS,CAAC;AACrB,CAAC;AAzED,gCAyEC","sourcesContent":["import { EmptyUnit } from '..';\nimport { ServiceInstanceWithDependencies } from '../service';\nimport { PluginInstanceWithDependencies } from '../plugin';\n\nexport interface MiddlewareConfig {\n    type: string | string[];\n\n    dependencies?: {\n        plugins?: string[];\n        services?: string[];\n    };\n\n    [key: string]: any;\n}\n\nexport interface MiddlewareConfigWithDependencies extends MiddlewareConfig {\n    dependencies: {\n        plugins: string[];\n        services: string[];\n    };\n}\n\nexport interface MiddlewareUnit {\n    is: 'middleware';\n    config: MiddlewareConfig;\n\n    [key: string]: any;\n}\n\n// tslint:disable-next-line:no-empty-interface\nexport interface MiddlewareInstance extends MiddlewareUnit {}\n\nexport interface MiddlewareInstanceWithDependencies extends MiddlewareInstance {\n    config: MiddlewareConfigWithDependencies;\n\n    plugins: {\n        [key: string]: PluginInstanceWithDependencies;\n    };\n\n    services: {\n        [key: string]: ServiceInstanceWithDependencies;\n    };\n}\n\nexport function Middleware (config: any) {\n    /*\n     * Inheritance pattern\n     */\n    // @ts-ignore\n    if (this instanceof Middleware) {\n        // @ts-ignore\n        (this as MiddlewareUnit).is = 'middleware';\n\n        /*\n         * Break early since this is all we need\n         */\n        return null as any;\n    }\n\n    /*\n     * Minimal decorator pattern\n     */\n    if (typeof config === 'function') {\n        (config as MiddlewareUnit).is = 'middleware';\n        (config as any).prototype.is = 'middleware';\n\n        /*\n         * Break early since this is all we need\n         */\n        return null as any;\n    }\n\n    /*\n     * Check validity of the config\n     */\n    if (typeof config !== 'object') {\n        throw new Error(\n            `[Middleware] Invalid config, expected \"Object\" but got \"${typeof config}\"`,\n        );\n    }\n\n    if (!config.hasOwnProperty('type')) {\n        throw new Error(\n            `[Middleware] Invalid config, expected a \\`type\\` property`,\n        );\n    }\n\n    if (typeof config.type !== 'string' && !Array.isArray(config.type)) {\n        throw new Error(\n            // tslint:disable-next-line:max-line-length\n            `[Middleware] Invalid config, expected a string or array of strings for the property \\`type\\` but got \"${typeof config.type}\"`,\n        );\n    }\n\n    /*\n     * Create a copy of the config\n     */\n    const copy: MiddlewareConfig = Object.assign({}, config);\n\n    /**\n     * Extend a class with a Leverage Middleware Configuration\n     */\n    function decorator (middleware: MiddlewareUnit | EmptyUnit): void {\n        /*\n         * Extend the given middleware class\n         */\n        middleware.config = copy;\n        (middleware as any).prototype.config = copy;\n\n        /*\n        * Set the kind of leverage unit this is\n        */\n        middleware.is = 'middleware';\n        (middleware as any).prototype.is = 'middleware';\n    }\n\n    return decorator;\n}\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"d78ce8ff02321ce3946b80eb1e2db47822b26be3"}
,"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\plugin\\index.ts": {"path":"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\plugin\\index.ts","statementMap":{"0":{"start":{"line":3,"column":4},"end":{"line":3,"column":71}},"1":{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},"2":{"start":{"line":3,"column":53},"end":{"line":3,"column":71}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":30}}},"fnMap":{"0":{"name":"__export","decl":{"start":{"line":2,"column":9},"end":{"line":2,"column":17}},"loc":{"start":{"line":2,"column":21},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},"type":"if","locations":[{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},{"start":{"line":3,"column":21},"end":{"line":3,"column":71}}],"line":3}},"s":{"0":3,"1":3,"2":3,"3":3,"4":3},"f":{"0":3},"b":{"0":[3,0]},"inputSourceMap":{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";;;;;AAAA,8BAAyB","sourcesContent":["export * from './plugin';\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"28bc9690f2a20e11a162c7c892baa22debf05fd8"}
,"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\plugin\\plugin.ts": {"path":"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\plugin\\plugin.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":8,"column":4},"end":{"line":15,"column":5}},"2":{"start":{"line":10,"column":8},"end":{"line":10,"column":27}},"3":{"start":{"line":14,"column":8},"end":{"line":14,"column":20}},"4":{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},"5":{"start":{"line":20,"column":8},"end":{"line":20,"column":29}},"6":{"start":{"line":21,"column":8},"end":{"line":21,"column":39}},"7":{"start":{"line":25,"column":8},"end":{"line":25,"column":20}},"8":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"9":{"start":{"line":31,"column":8},"end":{"line":31,"column":106}},"10":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"11":{"start":{"line":34,"column":8},"end":{"line":34,"column":79}},"12":{"start":{"line":36,"column":4},"end":{"line":40,"column":5}},"13":{"start":{"line":37,"column":8},"end":{"line":39,"column":137}},"14":{"start":{"line":44,"column":15},"end":{"line":44,"column":40}},"15":{"start":{"line":52,"column":8},"end":{"line":52,"column":29}},"16":{"start":{"line":53,"column":8},"end":{"line":53,"column":39}},"17":{"start":{"line":57,"column":8},"end":{"line":57,"column":29}},"18":{"start":{"line":58,"column":8},"end":{"line":58,"column":39}},"19":{"start":{"line":60,"column":4},"end":{"line":60,"column":21}},"20":{"start":{"line":62,"column":0},"end":{"line":62,"column":24}}},"fnMap":{"0":{"name":"Plugin","decl":{"start":{"line":3,"column":9},"end":{"line":3,"column":15}},"loc":{"start":{"line":3,"column":24},"end":{"line":61,"column":1}},"line":3},"1":{"name":"decorator","decl":{"start":{"line":48,"column":13},"end":{"line":48,"column":22}},"loc":{"start":{"line":48,"column":31},"end":{"line":59,"column":5}},"line":48}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":4},"end":{"line":15,"column":5}},"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":15,"column":5}},{"start":{"line":8,"column":4},"end":{"line":15,"column":5}}],"line":8},"1":{"loc":{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},{"start":{"line":19,"column":4},"end":{"line":26,"column":5}}],"line":19},"2":{"loc":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},{"start":{"line":30,"column":4},"end":{"line":32,"column":5}}],"line":30},"3":{"loc":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},{"start":{"line":33,"column":4},"end":{"line":35,"column":5}}],"line":33},"4":{"loc":{"start":{"line":36,"column":4},"end":{"line":40,"column":5}},"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":40,"column":5}},{"start":{"line":36,"column":4},"end":{"line":40,"column":5}}],"line":36},"5":{"loc":{"start":{"line":36,"column":8},"end":{"line":36,"column":70}},"type":"binary-expr","locations":[{"start":{"line":36,"column":8},"end":{"line":36,"column":39}},{"start":{"line":36,"column":43},"end":{"line":36,"column":70}}],"line":36}},"s":{"0":4,"1":10,"2":1,"3":1,"4":9,"5":1,"6":1,"7":1,"8":8,"9":3,"10":5,"11":1,"12":4,"13":2,"14":2,"15":1,"16":1,"17":1,"18":1,"19":2,"20":4},"f":{"0":10,"1":1},"b":{"0":[1,9],"1":[1,8],"2":[3,5],"3":[1,4],"4":[2,2],"5":[4,2]},"inputSourceMap":{"version":3,"file":"plugin.js","sourceRoot":"","sources":["plugin.ts"],"names":[],"mappings":";;AA8CA,gBAAwB,MAAW;IAC/B;;OAEG;IACH,aAAa;IACb,IAAI,IAAI,YAAY,MAAM,EAAE;QACxB,aAAa;QACZ,IAAmB,CAAC,EAAE,GAAG,QAAQ,CAAC;QAEnC;;WAEG;QACH,OAAO,IAAW,CAAC;KACtB;IAED;;OAEG;IACH,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE;QAC7B,MAAqB,CAAC,EAAE,GAAG,QAAQ,CAAC;QACpC,MAAc,CAAC,SAAS,CAAC,EAAE,GAAG,QAAQ,CAAC;QAExC;;WAEG;QACH,OAAO,IAAW,CAAC;KACtB;IAED;;OAEG;IACH,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;QAC5B,MAAM,IAAI,KAAK,CACX,4DAAuD,OAAO,MAAM,OAAG,CAC1E,CAAC;KACL;IAED,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;QAChC,MAAM,IAAI,KAAK,CACX,qDAAuD,CAC1D,CAAC;KACL;IAED,IAAI,OAAO,MAAM,CAAC,IAAI,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;QAChE,MAAM,IAAI,KAAK;QACX,2CAA2C;QAC3C,sGAAqG,OAAO,MAAM,CAAC,IAAI,OAAG,CAC7H,CAAC;KACL;IAED;;OAEG;IACH,IAAM,IAAI,GAAiB,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;IAErD;;OAEG;IACH,mBAAoB,MAA8B;QAC9C;;WAEG;QACH,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;QACpB,MAAc,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;QAExC;;UAEE;QACF,MAAM,CAAC,EAAE,GAAG,QAAQ,CAAC;QACpB,MAAc,CAAC,SAAS,CAAC,EAAE,GAAG,QAAQ,CAAC;IAC5C,CAAC;IAED,OAAO,SAAS,CAAC;AACrB,CAAC;AAzED,wBAyEC","sourcesContent":["import { EmptyUnit } from '..';\nimport { MiddlewareInstanceWithDependencies } from '../middleware';\nimport { ServiceInstanceWithDependencies } from '../service';\n\nexport interface PluginConfig {\n    type: string | string[];\n\n    dependencies?: {\n        plugins?: string[];\n        services?: string[];\n    };\n\n    [key: string]: any;\n}\n\nexport interface PluginConfigWithDependencies extends PluginConfig {\n    dependencies: {\n        plugins: string[];\n        services: string[];\n    };\n}\n\nexport interface PluginUnit {\n    is: 'plugin';\n    config: PluginConfig;\n\n    middleware?: (middleware: MiddlewareInstanceWithDependencies) => void;\n\n    [key: string]: any;\n}\n\n// tslint:disable-next-line:no-empty-interface\nexport interface PluginInstance extends PluginUnit {}\n\nexport interface PluginInstanceWithDependencies extends PluginInstance {\n    config: PluginConfigWithDependencies;\n\n    plugins: {\n        [key: string]: PluginInstanceWithDependencies;\n    };\n\n    services: {\n        [key: string]: ServiceInstanceWithDependencies;\n    };\n}\n\nexport function Plugin (config: any) {\n    /*\n     * Inheritance pattern\n     */\n    // @ts-ignore\n    if (this instanceof Plugin) {\n        // @ts-ignore\n        (this as PluginUnit).is = 'plugin';\n\n        /*\n         * Break early since this is all we need\n         */\n        return null as any;\n    }\n\n    /*\n     * Minimal decorator pattern\n     */\n    if (typeof config === 'function') {\n        (config as PluginUnit).is = 'plugin';\n        (config as any).prototype.is = 'plugin';\n\n        /*\n         * Break early since this is all we need\n         */\n        return null as any;\n    }\n\n    /*\n     * Check validity of the config\n     */\n    if (typeof config !== 'object') {\n        throw new Error(\n            `[Plugin] Invalid config, expected \"Object\" but got \"${typeof config}\"`,\n        );\n    }\n\n    if (!config.hasOwnProperty('type')) {\n        throw new Error(\n            `[Plugin] Invalid config, expected a \\`type\\` property`,\n        );\n    }\n\n    if (typeof config.type !== 'string' && !Array.isArray(config.type)) {\n        throw new Error(\n            // tslint:disable-next-line:max-line-length\n            `[Plugin] Invalid config, expected a string or array of strings for the property \\`type\\` but got \"${typeof config.type}\"`,\n        );\n    }\n\n    /*\n     * Create a copy of the config\n     */\n    const copy: PluginConfig = Object.assign({}, config);\n\n    /**\n     * Extend a class with a Leverage Plugin Configuration\n     */\n    function decorator (plugin: PluginUnit | EmptyUnit): void {\n        /*\n         * Extend the given plugin class\n         */\n        plugin.config = copy;\n        (plugin as any).prototype.config = copy;\n\n        /*\n        * Set the kind of leverage unit this is\n        */\n        plugin.is = 'plugin';\n        (plugin as any).prototype.is = 'plugin';\n    }\n\n    return decorator;\n}\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"e8b4cd964a3ec58d7cc5ea8abb7e44c9a1664e84"}
,"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\service\\index.ts": {"path":"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\service\\index.ts","statementMap":{"0":{"start":{"line":3,"column":4},"end":{"line":3,"column":71}},"1":{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},"2":{"start":{"line":3,"column":53},"end":{"line":3,"column":71}},"3":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"4":{"start":{"line":6,"column":0},"end":{"line":6,"column":31}}},"fnMap":{"0":{"name":"__export","decl":{"start":{"line":2,"column":9},"end":{"line":2,"column":17}},"loc":{"start":{"line":2,"column":21},"end":{"line":4,"column":1}},"line":2}},"branchMap":{"0":{"loc":{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},"type":"if","locations":[{"start":{"line":3,"column":21},"end":{"line":3,"column":71}},{"start":{"line":3,"column":21},"end":{"line":3,"column":71}}],"line":3}},"s":{"0":3,"1":3,"2":3,"3":3,"4":3},"f":{"0":3},"b":{"0":[3,0]},"inputSourceMap":{"version":3,"file":"index.js","sourceRoot":"","sources":["index.ts"],"names":[],"mappings":";;;;;AAAA,+BAA0B","sourcesContent":["export * from './service';\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"ad7ddbf89ba34ecf03f03d13fec4436d229e66f2"}
,"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\service\\service.ts": {"path":"C:\\Users\\short\\Documents\\work\\bytesize\\leverage\\src\\service\\service.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":8,"column":4},"end":{"line":15,"column":5}},"2":{"start":{"line":10,"column":8},"end":{"line":10,"column":28}},"3":{"start":{"line":14,"column":8},"end":{"line":14,"column":20}},"4":{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},"5":{"start":{"line":20,"column":8},"end":{"line":20,"column":30}},"6":{"start":{"line":21,"column":8},"end":{"line":21,"column":40}},"7":{"start":{"line":25,"column":8},"end":{"line":25,"column":20}},"8":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"9":{"start":{"line":31,"column":8},"end":{"line":31,"column":107}},"10":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"11":{"start":{"line":34,"column":8},"end":{"line":34,"column":80}},"12":{"start":{"line":36,"column":4},"end":{"line":38,"column":5}},"13":{"start":{"line":37,"column":8},"end":{"line":37,"column":125}},"14":{"start":{"line":42,"column":15},"end":{"line":42,"column":40}},"15":{"start":{"line":50,"column":8},"end":{"line":50,"column":30}},"16":{"start":{"line":51,"column":8},"end":{"line":51,"column":40}},"17":{"start":{"line":55,"column":8},"end":{"line":55,"column":31}},"18":{"start":{"line":56,"column":8},"end":{"line":56,"column":41}},"19":{"start":{"line":58,"column":4},"end":{"line":58,"column":21}},"20":{"start":{"line":60,"column":0},"end":{"line":60,"column":26}}},"fnMap":{"0":{"name":"Service","decl":{"start":{"line":3,"column":9},"end":{"line":3,"column":16}},"loc":{"start":{"line":3,"column":25},"end":{"line":59,"column":1}},"line":3},"1":{"name":"decorator","decl":{"start":{"line":46,"column":13},"end":{"line":46,"column":22}},"loc":{"start":{"line":46,"column":32},"end":{"line":57,"column":5}},"line":46}},"branchMap":{"0":{"loc":{"start":{"line":8,"column":4},"end":{"line":15,"column":5}},"type":"if","locations":[{"start":{"line":8,"column":4},"end":{"line":15,"column":5}},{"start":{"line":8,"column":4},"end":{"line":15,"column":5}}],"line":8},"1":{"loc":{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},"type":"if","locations":[{"start":{"line":19,"column":4},"end":{"line":26,"column":5}},{"start":{"line":19,"column":4},"end":{"line":26,"column":5}}],"line":19},"2":{"loc":{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},"type":"if","locations":[{"start":{"line":30,"column":4},"end":{"line":32,"column":5}},{"start":{"line":30,"column":4},"end":{"line":32,"column":5}}],"line":30},"3":{"loc":{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":35,"column":5}},{"start":{"line":33,"column":4},"end":{"line":35,"column":5}}],"line":33},"4":{"loc":{"start":{"line":36,"column":4},"end":{"line":38,"column":5}},"type":"if","locations":[{"start":{"line":36,"column":4},"end":{"line":38,"column":5}},{"start":{"line":36,"column":4},"end":{"line":38,"column":5}}],"line":36}},"s":{"0":4,"1":10,"2":1,"3":1,"4":9,"5":1,"6":1,"7":1,"8":8,"9":3,"10":5,"11":1,"12":4,"13":2,"14":2,"15":1,"16":1,"17":1,"18":1,"19":2,"20":4},"f":{"0":10,"1":1},"b":{"0":[1,9],"1":[1,8],"2":[3,5],"3":[1,4],"4":[2,2]},"inputSourceMap":{"version":3,"file":"service.js","sourceRoot":"","sources":["service.ts"],"names":[],"mappings":";;AA2CA,iBAAyB,MAAW;IAChC;;OAEG;IACH,aAAa;IACb,IAAI,IAAI,YAAY,OAAO,EAAE;QACzB,aAAa;QACZ,IAAoB,CAAC,EAAE,GAAG,SAAS,CAAC;QAErC;;WAEG;QACH,OAAO,IAAW,CAAC;KACtB;IAED;;OAEG;IACH,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE;QAC7B,MAAsB,CAAC,EAAE,GAAG,SAAS,CAAC;QACtC,MAAc,CAAC,SAAS,CAAC,EAAE,GAAG,SAAS,CAAC;QAEzC;;WAEG;QACH,OAAO,IAAW,CAAC;KACtB;IAED;;OAEG;IACH,IAAI,OAAO,MAAM,KAAK,QAAQ,EAAE;QAC5B,MAAM,IAAI,KAAK,CACX,6DAAwD,OAAO,MAAM,OAAG,CAC3E,CAAC;KACL;IAED,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;QAChC,MAAM,IAAI,KAAK,CACX,sDAAwD,CAC3D,CAAC;KACL;IAED,IAAI,OAAO,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;QACjC,MAAM,IAAI,KAAK,CACX,0EAAqE,OAAO,MAAM,CAAC,IAAI,OAAG,CAC7F,CAAC;KACL;IAED;;OAEG;IACH,IAAM,IAAI,GAAkB,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;IAEtD;;OAEG;IACH,mBAAoB,OAAgC;QAChD;;WAEG;QACF,OAAuB,CAAC,MAAM,GAAG,IAAI,CAAC;QACtC,OAAe,CAAC,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC;QAEzC;;UAEE;QACD,OAAuB,CAAC,EAAE,GAAG,SAAS,CAAC;QACvC,OAAe,CAAC,SAAS,CAAC,EAAE,GAAG,SAAS,CAAC;IAC9C,CAAC;IAED,OAAO,SAAS,CAAC;AACrB,CAAC;AAxED,0BAwEC","sourcesContent":["import { EmptyUnit } from '..';\nimport { PluginInstanceWithDependencies } from '../plugin';\n\nexport interface ServiceConfig {\n    name: string;\n\n    dependencies?: {\n        plugins?: string[];\n        services?: string[];\n    };\n\n    [key: string]: any;\n}\n\nexport interface ServiceConfigWithDependencies extends ServiceConfig {\n    dependencies: {\n        plugins: string[];\n        services: string[];\n    };\n}\n\nexport interface ServiceUnit {\n    is: 'service';\n    config: ServiceConfig;\n\n    [key: string]: any;\n}\n\n// tslint:disable-next-line:no-empty-interface\nexport interface ServiceInstance extends ServiceUnit {}\n\nexport interface ServiceInstanceWithDependencies extends ServiceInstance {\n    config: ServiceConfigWithDependencies;\n\n    plugins: {\n        [key: string]: PluginInstanceWithDependencies;\n    };\n\n    services: {\n        [key: string]: ServiceInstanceWithDependencies;\n    };\n}\n\nexport function Service (config: any) {\n    /*\n     * Inheritance pattern\n     */\n    // @ts-ignore\n    if (this instanceof Service) {\n        // @ts-ignore\n        (this as ServiceUnit).is = 'service';\n\n        /*\n         * Break early since this is all we need\n         */\n        return null as any;\n    }\n\n    /*\n     * Minimal decorator pattern\n     */\n    if (typeof config === 'function') {\n        (config as ServiceUnit).is = 'service';\n        (config as any).prototype.is = 'service';\n\n        /*\n         * Break early since this is all we need\n         */\n        return null as any;\n    }\n\n    /*\n     * Check validity of the config\n     */\n    if (typeof config !== 'object') {\n        throw new Error(\n            `[Service] Invalid config, expected \"Object\" but got \"${typeof config}\"`,\n        );\n    }\n\n    if (!config.hasOwnProperty('name')) {\n        throw new Error(\n            `[Service] Invalid config, expected a \\`name\\` property`,\n        );\n    }\n\n    if (typeof config.name !== 'string') {\n        throw new Error(\n            `[Service] Invalid config, expected name to be a \"string\" but got \"${typeof config.name}\"`,\n        );\n    }\n\n    /*\n     * Create a copy of the config\n     */\n    const copy: ServiceConfig = Object.assign({}, config);\n\n    /**\n     * Extend a class with Leverage Plugin Configuration\n     */\n    function decorator (service: ServiceUnit | EmptyUnit): void {\n        /*\n         * Extend the given service class\n         */\n        (service as ServiceUnit).config = copy;\n        (service as any).prototype.config = copy;\n\n        /*\n        * Set the kind of leverage unit this is\n        */\n        (service as ServiceUnit).is = 'service';\n        (service as any).prototype.is = 'service';\n    }\n\n    return decorator;\n}\n"]},"_coverageSchema":"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c","hash":"d93faaf079347538e7082452bd5c845f3ea1a6ce"}
}
